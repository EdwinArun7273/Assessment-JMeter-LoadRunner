<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="69">
  <HTTPTask id="1007" hostname="demowebshop.tricentis.com" path="/Scripts/jquery.magnific-popup.js" url="https://demowebshop.tricentis.com/Scripts/jquery.magnific-popup.js" ip="52.174.3.80" port="443" connectionId="23" origin="Primary" frame="1" startDateTime="2025-12-10T15:00:10.339+05:30" startTime="22202281" endTime="22202500">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZGVtb3dlYnNob3AudHJpY2VudGlzLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ikdvb2dsZSBDaHJvbWUiO3Y9IjExMyIsICJDaHJvbWl1bSI7dj0iMTEzIiwgIk5vdC1BLkJyYW5kIjt2PSIyNCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-mobile" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzExMy4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-platform" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IldpbmRvd3Mi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2FtZS1vcmlnaW4=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly9kZW1vd2Vic2hvcC50cmljZW50aXMuY29tL2hlYWx0aA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tR0IsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cookie" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVJSQWZmaW5pdHk9YWVmZjkzODRhYTU4ZGQ4MGEwNjA5N2RhNTVkNzZlN2EwMDM2NGJmMWY4NmM1MzA0ZThjNjkxNzU0ZGVkNTE3NzsgQVJSQWZmaW5pdHlTYW1lU2l0ZT1hZWZmOTM4NGFhNThkZDgwYTA2MDk3ZGE1NWQ3NmU3YTAwMzY0YmYxZjg2YzUzMDRlOGM2OTE3NTRkZWQ1MTc3OyBfX3V0bWE9NzgzODIwODEuNjA2MTQzMDk1LjE3NjUzNTg4MTMuMTc2NTM1ODgxMy4xNzY1MzU4ODEzLjE7IF9fdXRtYz03ODM4MjA4MTsgX191dG16PTc4MzgyMDgxLjE3NjUzNTg4MTMuMS4xLnV0bWNzcj0oZGlyZWN0KXx1dG1jY249KGRpcmVjdCl8dXRtY21kPShub25lKTsgX191dG10PTE7IF9fUmVxdWVzdFZlcmlmaWNhdGlvblRva2VuPVI2bms3RXkxSHhTbXAxWmdZZ3YycnNjbDcxZE1ROHJUbHBrcmxITUVndk1zOHlMV2dJY3o4TEJBUlpoa1ZUdHJiMjVzaFhTQ2lYbVA5U1hQckpUWU9hc2YxX2UydnV3a2dBeHZYYVpQNTlnMTsgQVNQLk5FVF9TZXNzaW9uSWQ9anJ2ZXRkcDNid2F2c3ZhbWkzZGlkeXBuOyBOT1BDT01NRVJDRS5BVVRIPTU5MzZCOEVCNDc1NUE3RTVGNTQwODlGNDg1Njc2NUIyQkIxMkQyMDYzOEY5QTgwMEI2MzcxRTM5ODJFQjYwMzM4REJGQ0FEQTk3Mzg4N0ZCRTEzQTc5RTU1MTNGRDQ3REZEMEZCREE3MkIwRjlDNzA3OUIyQzQyQjRFMjZFQzYzRDY4QUVFNjAwMDgxOTI5MTg0OTEzMjc0NUI5QjZBQzE4ODgwRjM0Qjk4REFDNkFGOTQ4MUEwNjg4MkE4MEE3RkY0RUQ0NjlGNDZDODI5MDcwNDI4QjBEOEJFNUY4MTY4N0FBRDk0MzJCRkFBQUQyQzVFMkQxQzVDNDE3RTk0RUNDOTZBQkVBMjVGMEQyMjg5OTg4RUQwMTM2RUY1RkZBRUEwNEM1Q0VCMjg1ODBENTQ2MTU2RTQ1RkMzNDBGRjhFOyBOb3AuY3VzdG9tZXI9ZTQ2NDNjNzctYjFjNC00NzM1LTllZDMtMmU4MmFiMGQwYjUxOyBfX3V0bWI9NzgzODIwODEuOC4xMC4xNzY1MzU4ODEzOyBOb3BDb21tZXJjZS5SZWNlbnRseVZpZXdlZFByb2R1Y3RzPVJlY2VudGx5Vmlld2VkUHJvZHVjdElkcz0yMg==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9TY3JpcHRzL2pxdWVyeS5tYWduaWZpYy1wb3B1cC5qcyBIVFRQLzEuMQ0KSG9zdDogZGVtb3dlYnNob3AudHJpY2VudGlzLmNvbQ0KQ29ubmVjdGlvbjoga2VlcC1hbGl2ZQ0Kc2VjLWNoLXVhOiAiR29vZ2xlIENocm9tZSI7dj0iMTEzIiwgIkNocm9taXVtIjt2PSIxMTMiLCAiTm90LUEuQnJhbmQiO3Y9IjI0Ig0Kc2VjLWNoLXVhLW1vYmlsZTogPzANClVzZXItQWdlbnQ6IE1vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMTMuMC4wLjAgU2FmYXJpLzUzNy4zNg0Kc2VjLWNoLXVhLXBsYXRmb3JtOiAiV2luZG93cyINCkFjY2VwdDogKi8qDQpTZWMtRmV0Y2gtU2l0ZTogc2FtZS1vcmlnaW4NClNlYy1GZXRjaC1Nb2RlOiBuby1jb3JzDQpTZWMtRmV0Y2gtRGVzdDogc2NyaXB0DQpSZWZlcmVyOiBodHRwczovL2RlbW93ZWJzaG9wLnRyaWNlbnRpcy5jb20vaGVhbHRoDQpBY2NlcHQtRW5jb2Rpbmc6IGd6aXAsIGRlZmxhdGUsIGJyDQpBY2NlcHQtTGFuZ3VhZ2U6IGVuLUdCLGVuO3E9MC45DQpDb29raWU6IEFSUkFmZmluaXR5PWFlZmY5Mzg0YWE1OGRkODBhMDYwOTdkYTU1ZDc2ZTdhMDAzNjRiZjFmODZjNTMwNGU4YzY5MTc1NGRlZDUxNzc7IEFSUkFmZmluaXR5U2FtZVNpdGU9YWVmZjkzODRhYTU4ZGQ4MGEwNjA5N2RhNTVkNzZlN2EwMDM2NGJmMWY4NmM1MzA0ZThjNjkxNzU0ZGVkNTE3NzsgX191dG1hPTc4MzgyMDgxLjYwNjE0MzA5NS4xNzY1MzU4ODEzLjE3NjUzNTg4MTMuMTc2NTM1ODgxMy4xOyBfX3V0bWM9NzgzODIwODE7IF9fdXRtej03ODM4MjA4MS4xNzY1MzU4ODEzLjEuMS51dG1jc3I9KGRpcmVjdCl8dXRtY2NuPShkaXJlY3QpfHV0bWNtZD0obm9uZSk7IF9fdXRtdD0xOyBfX1JlcXVlc3RWZXJpZmljYXRpb25Ub2tlbj1SNm5rN0V5MUh4U21wMVpnWWd2MnJzY2w3MWRNUThyVGxwa3JsSE1FZ3ZNczh5TFdnSWN6OExCQVJaaGtWVHRyYjI1c2hYU0NpWG1QOVNYUHJKVFlPYXNmMV9lMnZ1d2tnQXh2WGFaUDU5ZzE7IEFTUC5ORVRfU2Vzc2lvbklkPWpydmV0ZHAzYndhdnN2YW1pM2RpZHlwbjsgTk9QQ09NTUVSQ0UuQVVUSD01OTM2QjhFQjQ3NTVBN0U1RjU0MDg5RjQ4NTY3NjVCMkJCMTJEMjA2MzhGOUE4MDBCNjM3MUUzOTgyRUI2MDMzOERCRkNBREE5NzM4ODdGQkUxM0E3OUU1NTEzRkQ0N0RGRDBGQkRBNzJCMEY5QzcwNzlCMkM0MkI0RTI2RUM2M0Q2OEFFRTYwMDA4MTkyOTE4NDkxMzI3NDVCOUI2QUMxODg4MEYzNEI5OERBQzZBRjk0ODFBMDY4ODJBODBBN0ZGNEVENDY5RjQ2QzgyOTA3MDQyOEIwRDhCRTVGODE2ODdBQUQ5NDMyQkZBQUFEMkM1RTJEMUM1QzQxN0U5NEVDQzk2QUJFQTI1RjBEMjI4OTk4OEVEMDEzNkVGNUZGQUVBMDRDNUNFQjI4NTgwRDU0NjE1NkU0NUZDMzQwRkY4RTsgTm9wLmN1c3RvbWVyPWU0NjQzYzc3LWIxYzQtNDczNS05ZWQzLTJlODJhYjBkMGI1MTsgX191dG1iPTc4MzgyMDgxLjguMTAuMTc2NTM1ODgxMzsgTm9wQ29tbWVyY2UuUmVjZW50bHlWaWV3ZWRQcm9kdWN0cz1SZWNlbnRseVZpZXdlZFByb2R1Y3RJZHM9MjINCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
        <HTTPCookies>
          <HTTPHeaderEntity name="ARRAffinity" index="0">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YWVmZjkzODRhYTU4ZGQ4MGEwNjA5N2RhNTVkNzZlN2EwMDM2NGJmMWY4NmM1MzA0ZThjNjkxNzU0ZGVkNTE3Nw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ARRAffinitySameSite" index="1">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>YWVmZjkzODRhYTU4ZGQ4MGEwNjA5N2RhNTVkNzZlN2EwMDM2NGJmMWY4NmM1MzA0ZThjNjkxNzU0ZGVkNTE3Nw==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="__utma" index="2">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NzgzODIwODEuNjA2MTQzMDk1LjE3NjUzNTg4MTMuMTc2NTM1ODgxMy4xNzY1MzU4ODEzLjE=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="__utmc" index="3">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NzgzODIwODE=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="__utmz" index="4">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NzgzODIwODEuMTc2NTM1ODgxMy4xLjEudXRtY3NyPShkaXJlY3QpfHV0bWNjbj0oZGlyZWN0KXx1dG1jbWQ9KG5vbmUp</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="__utmt" index="5">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>MQ==</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="__RequestVerificationToken" index="6">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>UjZuazdFeTFIeFNtcDFaZ1lndjJyc2NsNzFkTVE4clRscGtybEhNRWd2TXM4eUxXZ0ljejhMQkFSWmhrVlR0cmIyNXNoWFNDaVhtUDlTWFBySlRZT2FzZjFfZTJ2dXdrZ0F4dlhhWlA1OWcx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="ASP.NET_SessionId" index="7">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>anJ2ZXRkcDNid2F2c3ZhbWkzZGlkeXBu</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="NOPCOMMERCE.AUTH" index="8">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NTkzNkI4RUI0NzU1QTdFNUY1NDA4OUY0ODU2NzY1QjJCQjEyRDIwNjM4RjlBODAwQjYzNzFFMzk4MkVCNjAzMzhEQkZDQURBOTczODg3RkJFMTNBNzlFNTUxM0ZENDdERkQwRkJEQTcyQjBGOUM3MDc5QjJDNDJCNEUyNkVDNjNENjhBRUU2MDAwODE5MjkxODQ5MTMyNzQ1QjlCNkFDMTg4ODBGMzRCOThEQUM2QUY5NDgxQTA2ODgyQTgwQTdGRjRFRDQ2OUY0NkM4MjkwNzA0MjhCMEQ4QkU1RjgxNjg3QUFEOTQzMkJGQUFBRDJDNUUyRDFDNUM0MTdFOTRFQ0M5NkFCRUEyNUYwRDIyODk5ODhFRDAxMzZFRjVGRkFFQTA0QzVDRUIyODU4MEQ1NDYxNTZFNDVGQzM0MEZGOEU=</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="Nop.customer" index="9">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>ZTQ2NDNjNzctYjFjNC00NzM1LTllZDMtMmU4MmFiMGQwYjUx</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="__utmb" index="10">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>NzgzODIwODEuOC4xMC4xNzY1MzU4ODEz</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
          <HTTPHeaderEntity name="NopCommerce.RecentlyViewedProducts" index="11">
            <HTTPDataSet>
              <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
                <ActualData>UmVjZW50bHlWaWV3ZWRQcm9kdWN0SWRzPTIy</ActualData>
              </HTTPData>
            </HTTPDataSet>
            <IsExternalData>false</IsExternalData>
          </HTTPHeaderEntity>
        </HTTPCookies>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>13925</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Length" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTM5MjU=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Type" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24veC1qYXZhc2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>V2VkLCAxMCBEZWMgMjAyNSAwOToyOToyNCBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TWljcm9zb2Z0LUlJUy8xMC4w</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Ranges" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ynl0ZXM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0yMDczNjAw</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IjAzN2RjN2ZhYTJkMjE6MCI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>VHVlLCAzMCBBdWcgMjAxNiAxMDozNzoyNiBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Powered-By" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QVNQLk5FVA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LUxlbmd0aDogMTM5MjUNCkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24veC1qYXZhc2NyaXB0DQpEYXRlOiBXZWQsIDEwIERlYyAyMDI1IDA5OjI5OjI0IEdNVA0KU2VydmVyOiBNaWNyb3NvZnQtSUlTLzEwLjANCkFjY2VwdC1SYW5nZXM6IGJ5dGVzDQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTIwNzM2MDANCkNvbnRlbnQtRW5jb2Rpbmc6IGd6aXANCkVUYWc6ICIwMzdkYzdmYWEyZDIxOjAiDQpMYXN0LU1vZGlmaWVkOiBUdWUsIDMwIEF1ZyAyMDE2IDEwOjM3OjI2IEdNVA0KVmFyeTogQWNjZXB0LUVuY29kaW5nDQpYLVBvd2VyZWQtQnk6IEFTUC5ORVQNCg0K</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyohIE1hZ25pZmljIFBvcHVwIC0gdjAuOS45IC0gMjAxMy0xMi0yNw0KKiBodHRwOi8vZGltc2VtZW5vdi5jb20vcGx1Z2lucy9tYWduaWZpYy1wb3B1cC8NCiogQ29weXJpZ2h0IChjKSAyMDEzIERtaXRyeSBTZW1lbm92OyAqLw0KOyhmdW5jdGlvbigkKSB7DQoNCi8qPj5jb3JlKi8NCi8qKg0KICogDQogKiBNYWduaWZpYyBQb3B1cCBDb3JlIEpTIGZpbGUNCiAqIA0KICovDQoNCg0KLyoqDQogKiBQcml2YXRlIHN0YXRpYyBjb25zdGFudHMNCiAqLw0KdmFyIENMT1NFX0VWRU5UID0gJ0Nsb3NlJywNCglCRUZPUkVfQ0xPU0VfRVZFTlQgPSAnQmVmb3JlQ2xvc2UnLA0KCUFGVEVSX0NMT1NFX0VWRU5UID0gJ0FmdGVyQ2xvc2UnLA0KCUJFRk9SRV9BUFBFTkRfRVZFTlQgPSAnQmVmb3JlQXBwZW5kJywNCglNQVJLVVBfUEFSU0VfRVZFTlQgPSAnTWFya3VwUGFyc2UnLA0KCU9QRU5fRVZFTlQgPSAnT3BlbicsDQoJQ0hBTkdFX0VWRU5UID0gJ0NoYW5nZScsDQoJTlMgPSAnbWZwJywNCglFVkVOVF9OUyA9ICcuJyArIE5TLA0KCVJFQURZX0NMQVNTID0gJ21mcC1yZWFkeScsDQoJUkVNT1ZJTkdfQ0xBU1MgPSAnbWZwLXJlbW92aW5nJywNCglQUkVWRU5UX0NMT1NFX0NMQVNTID0gJ21mcC1wcmV2ZW50LWNsb3NlJzsNCg0KDQovKioNCiAqIFByaXZhdGUgdmFycyANCiAqLw0KdmFyIG1mcCwgLy8gQXMgd2UgaGF2ZSBvbmx5IG9uZSBpbnN0YW5jZSBvZiBNYWduaWZpY1BvcHVwIG9iamVjdCwgd2UgZGVmaW5lIGl0IGxvY2FsbHkgdG8gbm90IHRvIHVzZSAndGhpcycNCglNYWduaWZpY1BvcHVwID0gZnVuY3Rpb24oKXt9LA0KCV9pc0pRID0gISEod2luZG93LmpRdWVyeSksDQoJX3ByZXZTdGF0dXMsDQoJX3dpbmRvdyA9ICQod2luZG93KSwNCglfYm9keSwNCglfZG9jdW1lbnQsDQoJX3ByZXZDb250ZW50VHlwZSwNCglfd3JhcENsYXNzZXMsDQoJX2N1cnJQb3B1cFR5cGU7DQoNCg0KLyoqDQogKiBQcml2YXRlIGZ1bmN0aW9ucw0KICovDQp2YXIgX21mcE9uID0gZnVuY3Rpb24obmFtZSwgZikgew0KCQltZnAuZXYub24oTlMgKyBuYW1lICsgRVZFTlRfTlMsIGYpOw0KCX0sDQoJX2dldEVsID0gZnVuY3Rpb24oY2xhc3NOYW1lLCBhcHBlbmRUbywgaHRtbCwgcmF3KSB7DQoJCXZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KCQllbC5jbGFzc05hbWUgPSAnbWZwLScrY2xhc3NOYW1lOw0KCQlpZihodG1sKSB7DQoJCQllbC5pbm5lckhUTUwgPSBodG1sOw0KCQl9DQoJCWlmKCFyYXcpIHsNCgkJCWVsID0gJChlbCk7DQoJCQlpZihhcHBlbmRUbykgew0KCQkJCWVsLmFwcGVuZFRvKGFwcGVuZFRvKTsNCgkJCX0NCgkJfSBlbHNlIGlmKGFwcGVuZFRvKSB7DQoJCQlhcHBlbmRUby5hcHBlbmRDaGlsZChlbCk7DQoJCX0NCgkJcmV0dXJuIGVsOw0KCX0sDQoJX21mcFRyaWdnZXIgPSBmdW5jdGlvbihlLCBkYXRhKSB7DQoJCW1mcC5ldi50cmlnZ2VySGFuZGxlcihOUyArIGUsIGRhdGEpOw0KDQoJCWlmKG1mcC5zdC5jYWxsYmFja3MpIHsNCgkJCS8vIGNvbnZlcnRzICJtZnBFdmVudE5hbWUiIHRvICJldmVudE5hbWUiIGNhbGxiYWNrIGFuZCB0cmlnZ2VycyBpdCBpZiBpdCdzIHByZXNlbnQNCgkJCWUgPSBlLmNoYXJBdCgwKS50b0xvd2VyQ2FzZSgpICsgZS5zbGljZSgxKTsNCgkJCWlmKG1mcC5zdC5jYWxsYmFja3NbZV0pIHsNCgkJCQltZnAuc3QuY2FsbGJhY2tzW2VdLmFwcGx5KG1mcCwgJC5pc0FycmF5KGRhdGEpID8gZGF0YSA6IFtkYXRhXSk7DQoJCQl9DQoJCX0NCgl9LA0KCV9nZXRDbG9zZUJ0biA9IGZ1bmN0aW9uKHR5cGUpIHsNCgkJaWYodHlwZSAhPT0gX2N1cnJQb3B1cFR5cGUgfHwgIW1mcC5jdXJyVGVtcGxhdGUuY2xvc2VCdG4pIHsNCgkJCW1mcC5jdXJyVGVtcGxhdGUuY2xvc2VCdG4gPSAkKCBtZnAuc3QuY2xvc2VNYXJrdXAucmVwbGFjZSgnJXRpdGxlJScsIG1mcC5zdC50Q2xvc2UgKSApOw0KCQkJX2N1cnJQb3B1cFR5cGUgPSB0eXBlOw0KCQl9DQoJCXJldHVybiBtZnAuY3VyclRlbXBsYXRlLmNsb3NlQnRuOw0KCX0sDQoJLy8gSW5pdGlhbGl6ZSBNYWduaWZpYyBQb3B1cCBvbmx5IHdoZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2UNCglfY2hlY2tJbnN0YW5jZSA9IGZ1bmN0aW9uKCkgew0KCQlpZighJC5tYWduaWZpY1BvcHVwLmluc3RhbmNlKSB7DQoJCQltZnAgPSBuZXcgTWFnbmlmaWNQb3B1cCgpOw0KCQkJbWZwLmluaXQoKTsNCgkJCSQubWFnbmlmaWNQb3B1cC5pbnN0YW5jZSA9IG1mcDsNCgkJfQ0KCX0sDQoJLy8gQ1NTIHRyYW5zaXRpb24gZGV0ZWN0aW9uLCBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzcyNjQ4OTkvZGV0ZWN0LWNzcy10cmFuc2l0aW9ucy11c2luZy1qYXZhc2NyaXB0LWFuZC13aXRob3V0LW1vZGVybml6cg0KCXN1cHBvcnRzVHJhbnNpdGlvbnMgPSBmdW5jdGlvbigpIHsNCgkJdmFyIHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykuc3R5bGUsIC8vICdzJyBmb3Igc3R5bGUuIGJldHRlciB0byBjcmVhdGUgYW4gZWxlbWVudCBpZiBib2R5IHlldCB0byBleGlzdA0KCQkJdiA9IFsnbXMnLCdPJywnTW96JywnV2Via2l0J107IC8vICd2JyBmb3IgdmVuZG9yDQoNCgkJaWYoIHNbJ3RyYW5zaXRpb24nXSAhPT0gdW5kZWZpbmVkICkgew0KCQkJcmV0dXJuIHRydWU7IA0KCQl9DQoJCQkNCgkJd2hpbGUoIHYubGVuZ3RoICkgew0KCQkJaWYoIHYucG9wKCkgKyAnVHJhbnNpdGlvbicgaW4gcyApIHsNCgkJCQlyZXR1cm4gdHJ1ZTsNCgkJCX0NCgkJfQ0KCQkJCQ0KCQlyZXR1cm4gZmFsc2U7DQoJfTsNCg0KDQoNCi8qKg0KICogUHVibGljIGZ1bmN0aW9ucw0KICovDQpNYWduaWZpY1BvcHVwLnByb3RvdHlwZSA9IHsNCg0KCWNvbnN0cnVjdG9yOiBNYWduaWZpY1BvcHVwLA0KDQoJLyoqDQoJICogSW5pdGlhbGl6ZXMgTWFnbmlmaWMgUG9wdXAgcGx1Z2luLiANCgkgKiBUaGlzIGZ1bmN0aW9uIGlzIHRyaWdnZXJlZCBvbmx5IG9uY2Ugd2hlbiAkLmZuLm1hZ25pZmljUG9wdXAgb3IgJC5tYWduaWZpY1BvcHVwIGlzIGV4ZWN1dGVkDQoJICovDQoJaW5pdDogZnVuY3Rpb24oKSB7DQoJCXZhciBhcHBWZXJzaW9uID0gbmF2aWdhdG9yLmFwcFZlcnNpb247DQoJCW1mcC5pc0lFNyA9IGFwcFZlcnNpb24uaW5kZXhPZigiTVNJRSA3LiIpICE9PSAtMTsgDQoJCW1mcC5pc0lFOCA9IGFwcFZlcnNpb24uaW5kZXhPZigiTVNJRSA4LiIpICE9PSAtMTsNCgkJbWZwLmlzTG93SUUgPSBtZnAuaXNJRTcgfHwgbWZwLmlzSUU4Ow0KCQltZnAuaXNBbmRyb2lkID0gKC9hbmRyb2lkL2dpKS50ZXN0KGFwcFZlcnNpb24pOw0KCQltZnAuaXNJT1MgPSAoL2lwaG9uZXxpcGFkfGlwb2QvZ2kpLnRlc3QoYXBwVmVyc2lvbik7DQoJCW1mcC5zdXBwb3J0c1RyYW5zaXRpb24gPSBzdXBwb3J0c1RyYW5zaXRpb25zKCk7DQoNCgkJLy8gV2UgZGlzYWJsZSBmaXhlZCBwb3NpdGlvbmVkIGxpZ2h0Ym94IG9uIGRldmljZXMgdGhhdCBkb24ndCBoYW5kbGUgaXQgbmljZWx5Lg0KCQkvLyBJZiB5b3Uga25vdyBhIGJldHRlciB3YXkgb2YgZGV0ZWN0aW5nIHRoaXMgLSBsZXQgbWUga25vdy4NCgkJbWZwLnByb2JhYmx5TW9iaWxlID0gKG1mcC5pc0FuZHJvaWQgfHwgbWZwLmlzSU9TIHx8IC8oT3BlcmEgTWluaSl8S2luZGxlfHdlYk9TfEJsYWNrQmVycnl8KE9wZXJhIE1vYmkpfChXaW5kb3dzIFBob25lKXxJRU1vYmlsZS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgKTsNCgkJX2RvY3VtZW50ID0gJChkb2N1bWVudCk7DQoNCgkJbWZwLnBvcHVwc0NhY2hlID0ge307DQoJfSwNCg0KCS8qKg0KCSAqIE9wZW5zIHBvcHVwDQoJICogQHBhcmFtICBkYXRhIFtkZXNjcmlwdGlvbl0NCgkgKi8NCglvcGVuOiBmdW5jdGlvbihkYXRhKSB7DQoNCgkJaWYoIV9ib2R5KSB7DQoJCQlfYm9keSA9ICQoZG9jdW1lbnQuYm9keSk7DQoJCX0NCg0KCQl2YXIgaTsNCg0KCQlpZihkYXRhLmlzT2JqID09PSBmYWxzZSkgeyANCgkJCS8vIGNvbnZlcnQgalF1ZXJ5IGNvbGxlY3Rpb24gdG8gYXJyYXkgdG8gYXZvaWQgY29uZmxpY3RzIGxhdGVyDQoJCQltZnAuaXRlbXMgPSBkYXRhLml0ZW1zLnRvQXJyYXkoKTsNCg0KCQkJbWZwLmluZGV4ID0gMDsNCgkJCXZhciBpdGVtcyA9IGRhdGEuaXRlbXMsDQoJCQkJaXRlbTsNCgkJCWZvcihpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7DQoJCQkJaXRlbSA9IGl0ZW1zW2ldOw0KCQkJCWlmKGl0ZW0ucGFyc2VkKSB7DQoJCQkJCWl0ZW0gPSBpdGVtLmVsWzBdOw0KCQkJCX0NCgkJCQlpZihpdGVtID09PSBkYXRhLmVsWzBdKSB7DQoJCQkJCW1mcC5pbmRleCA9IGk7DQoJCQkJCWJyZWFrOw0KCQkJCX0NCgkJCX0NCgkJfSBlbHNlIHsNCgkJCW1mcC5pdGVtcyA9ICQuaXNBcnJheShkYXRhLml0ZW1zKSA/IGRhdGEuaXRlbXMgOiBbZGF0YS5pdGVtc107DQoJCQltZnAuaW5kZXggPSBkYXRhLmluZGV4IHx8IDA7DQoJCX0NCg0KCQkvLyBpZiBwb3B1cCBpcyBhbHJlYWR5IG9wZW5lZCAtIHdlIGp1c3QgdXBkYXRlIHRoZSBjb250ZW50DQoJCWlmKG1mcC5pc09wZW4pIHsNCgkJCW1mcC51cGRhdGVJdGVtSFRNTCgpOw0KCQkJcmV0dXJuOw0KCQl9DQoJCQ0KCQltZnAudHlwZXMgPSBbXTsgDQoJCV93cmFwQ2xhc3NlcyA9ICcnOw0KCQlpZihkYXRhLm1haW5FbCAmJiBkYXRhLm1haW5FbC5sZW5ndGgpIHsNCgkJCW1mcC5ldiA9IGRhdGEubWFpbkVsLmVxKDApOw0KCQl9IGVsc2Ugew0KCQkJbWZwLmV2ID0gX2RvY3VtZW50Ow0KCQl9DQoNCgkJaWYoZGF0YS5rZXkpIHsNCgkJCWlmKCFtZnAucG9wdXBzQ2FjaGVbZGF0YS5rZXldKSB7DQoJCQkJbWZwLnBvcHVwc0NhY2hlW2RhdGEua2V5XSA9IHt9Ow0KCQkJfQ0KCQkJbWZwLmN1cnJUZW1wbGF0ZSA9IG1mcC5wb3B1cHNDYWNoZVtkYXRhLmtleV07DQoJCX0gZWxzZSB7DQoJCQltZnAuY3VyclRlbXBsYXRlID0ge307DQoJCX0NCg0KDQoNCgkJbWZwLnN0ID0gJC5leHRlbmQodHJ1ZSwge30sICQubWFnbmlmaWNQb3B1cC5kZWZhdWx0cywgZGF0YSApOyANCgkJbWZwLmZpeGVkQ29udGVudFBvcyA9IG1mcC5zdC5maXhlZENvbnRlbnRQb3MgPT09ICdhdXRvJyA/ICFtZnAucHJvYmFibHlNb2JpbGUgOiBtZnAuc3QuZml4ZWRDb250ZW50UG9zOw0KDQoJCWlmKG1mcC5zdC5tb2RhbCkgew0KCQkJbWZwLnN0LmNsb3NlT25Db250ZW50Q2xpY2sgPSBmYWxzZTsNCgkJCW1mcC5zdC5jbG9zZU9uQmdDbGljayA9IGZhbHNlOw0KCQkJbWZwLnN0LnNob3dDbG9zZUJ0biA9IGZhbHNlOw0KCQkJbWZwLnN0LmVuYWJsZUVzY2FwZUtleSA9IGZhbHNlOw0KCQl9DQoJCQ0KDQoJCS8vIEJ1aWxkaW5nIG1hcmt1cA0KCQkvLyBtYWluIGNvbnRhaW5lcnMgYXJlIGNyZWF0ZWQgb25seSBvbmNlDQoJCWlmKCFtZnAuYmdPdmVybGF5KSB7DQoNCgkJCS8vIERhcmsgb3ZlcmxheQ0KCQkJbWZwLmJnT3ZlcmxheSA9IF9nZXRFbCgnYmcnKS5vbignY2xpY2snK0VWRU5UX05TLCBmdW5jdGlvbigpIHsNCgkJCQltZnAuY2xvc2UoKTsNCgkJCX0pOw0KDQoJCQltZnAud3JhcCA9IF9nZXRFbCgnd3JhcCcpLmF0dHIoJ3RhYmluZGV4JywgLTEpLm9uKCdjbGljaycrRVZFTlRfTlMsIGZ1bmN0aW9uKGUpIHsNCgkJCQlpZihtZnAuX2NoZWNrSWZDbG9zZShlLnRhcmdldCkpIHsNCgkJCQkJbWZwLmNsb3NlKCk7DQoJCQkJfQ0KCQkJfSk7DQoNCgkJCW1mcC5jb250YWluZXIgPSBfZ2V0RWwoJ2NvbnRhaW5lcicsIG1mcC53cmFwKTsNCgkJfQ0KDQoJCW1mcC5jb250ZW50Q29udGFpbmVyID0gX2dldEVsKCdjb250ZW50Jyk7DQoJCWlmKG1mcC5zdC5wcmVsb2FkZXIpIHsNCgkJCW1mcC5wcmVsb2FkZXIgPSBfZ2V0RWwoJ3ByZWxvYWRlcicsIG1mcC5jb250YWluZXIsIG1mcC5zdC50TG9hZGluZyk7DQoJCX0NCg0KDQoJCS8vIEluaXRpYWxpemluZyBtb2R1bGVzDQoJCXZhciBtb2R1bGVzID0gJC5tYWduaWZpY1BvcHVwLm1vZHVsZXM7DQoJCWZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHsNCgkJCXZhciBuID0gbW9kdWxlc1tpXTsNCgkJCW4gPSBuLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgbi5zbGljZSgxKTsNCgkJCW1mcFsnaW5pdCcrbl0uY2FsbChtZnApOw0KCQl9DQoJCV9tZnBUcmlnZ2VyKCdCZWZvcmVPcGVuJyk7DQoNCg0KCQlpZihtZnAuc3Quc2hvd0Nsb3NlQnRuKSB7DQoJCQkvLyBDbG9zZSBidXR0b24NCgkJCWlmKCFtZnAuc3QuY2xvc2VCdG5JbnNpZGUpIHsNCgkJCQltZnAud3JhcC5hcHBlbmQoIF9nZXRDbG9zZUJ0bigpICk7DQoJCQl9IGVsc2Ugew0KCQkJCV9tZnBPbihNQVJLVVBfUEFSU0VfRVZFTlQsIGZ1bmN0aW9uKGUsIHRlbXBsYXRlLCB2YWx1ZXMsIGl0ZW0pIHsNCgkJCQkJdmFsdWVzLmNsb3NlX3JlcGxhY2VXaXRoID0gX2dldENsb3NlQnRuKGl0ZW0udHlwZSk7DQoJCQkJfSk7DQoJCQkJX3dyYXBDbGFzc2VzICs9ICcgbWZwLWNsb3NlLWJ0bi1pbic7DQoJCQl9DQoJCX0NCg0KCQlpZihtZnAuc3QuYWxpZ25Ub3ApIHsNCgkJCV93cmFwQ2xhc3NlcyArPSAnIG1mcC1hbGlnbi10b3AnOw0KCQl9DQoNCgkNCg0KCQlpZihtZnAuZml4ZWRDb250ZW50UG9zKSB7DQoJCQltZnAud3JhcC5jc3Moew0KCQkJCW92ZXJmbG93OiBtZnAuc3Qub3ZlcmZsb3dZLA0KCQkJCW92ZXJmbG93WDogJ2hpZGRlbicsDQoJCQkJb3ZlcmZsb3dZOiBtZnAuc3Qub3ZlcmZsb3dZDQoJCQl9KTsNCgkJfSBlbHNlIHsNCgkJCW1mcC53cmFwLmNzcyh7IA0KCQkJCXRvcDogX3dpbmRvdy5zY3JvbGxUb3AoKSwNCgkJCQlwb3NpdGlvbjogJ2Fic29sdXRlJw0KCQkJfSk7DQoJCX0NCgkJaWYoIG1mcC5zdC5maXhlZEJnUG9zID09PSBmYWxzZSB8fCAobWZwLnN0LmZpeGVkQmdQb3MgPT09ICdhdXRvJyAmJiAhbWZwLmZpeGVkQ29udGVudFBvcykgKSB7DQoJCQltZnAuYmdPdmVybGF5LmNzcyh7DQoJCQkJaGVpZ2h0OiBfZG9jdW1lbnQuaGVpZ2h0KCksDQoJCQkJcG9zaXRpb246ICdhYnNvbHV0ZScNCgkJCX0pOw0KCQl9DQoNCgkJDQoNCgkJaWYobWZwLnN0LmVuYWJsZUVzY2FwZUtleSkgew0KCQkJLy8gQ2xvc2Ugb24gRVNDIGtleQ0KCQkJX2RvY3VtZW50Lm9uKCdrZXl1cCcgKyBFVkVOVF9OUywgZnVuY3Rpb24oZSkgew0KCQkJCWlmKGUua2V5Q29kZSA9PT0gMjcpIHsNCgkJCQkJbWZwLmNsb3NlKCk7DQoJCQkJfQ0KCQkJfSk7DQoJCX0NCg0KCQlfd2luZG93Lm9uKCdyZXNpemUnICsgRVZFTlRfTlMsIGZ1bmN0aW9uKCkgew0KCQkJbWZwLnVwZGF0ZVNpemUoKTsNCgkJfSk7DQoNCg0KCQlpZighbWZwLnN0LmNsb3NlT25Db250ZW50Q2xpY2spIHsNCgkJCV93cmFwQ2xhc3NlcyArPSAnIG1mcC1hdXRvLWN1cnNvcic7DQoJCX0NCgkJDQoJCWlmKF93cmFwQ2xhc3NlcykNCgkJCW1mcC53cmFwLmFkZENsYXNzKF93cmFwQ2xhc3Nlcyk7DQoNCg0KCQkvLyB0aGlzIHRyaWdnZXJzIHJlY2FsY3VsYXRpb24gb2YgbGF5b3V0LCBzbyB3ZSBnZXQgaXQgb25jZSB0byBub3QgdG8gdHJpZ2dlciB0d2ljZQ0KCQl2YXIgd2luZG93SGVpZ2h0ID0gbWZwLndIID0gX3dpbmRvdy5oZWlnaHQoKTsNCg0KCQkNCgkJdmFyIHdpbmRvd1N0eWxlcyA9IHt9Ow0KDQoJCWlmKCBtZnAuZml4ZWRDb250ZW50UG9zICkgew0KICAgICAgICAgICAgaWYobWZwLl9oYXNTY3JvbGxCYXIod2luZG93SGVpZ2h0KSl7DQogICAgICAgICAgICAgICAgdmFyIHMgPSBtZnAuX2dldFNjcm9sbGJhclNpemUoKTsNCiAgICAgICAgICAgICAgICBpZihzKSB7DQogICAgICAgICAgICAgICAgICAgIHdpbmRvd1N0eWxlcy5tYXJnaW5SaWdodCA9IHM7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCgkJaWYobWZwLmZpeGVkQ29udGVudFBvcykgew0KCQkJaWYoIW1mcC5pc0lFNykgew0KCQkJCXdpbmRvd1N0eWxlcy5vdmVyZmxvdyA9ICdoaWRkZW4nOw0KCQkJfSBlbHNlIHsNCgkJCQkvLyBpZTcgZG91YmxlLXNjcm9sbCBidWcNCgkJCQkkKCdib2R5LCBodG1sJykuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTsNCgkJCX0NCgkJfQ0KDQoJCQ0KCQkNCgkJdmFyIGNsYXNzZXNUb2FkZCA9IG1mcC5zdC5tYWluQ2xhc3M7DQoJCWlmKG1mcC5pc0lFNykgew0KCQkJY2xhc3Nlc1RvYWRkICs9ICcgbWZwLWllNyc7DQoJCX0NCgkJaWYoY2xhc3Nlc1RvYWRkKSB7DQoJCQltZnAuX2FkZENsYXNzVG9NRlAoIGNsYXNzZXNUb2FkZCApOw0KCQl9DQoNCgkJLy8gYWRkIGNvbnRlbnQNCgkJbWZwLnVwZGF0ZUl0ZW1IVE1MKCk7DQoNCgkJX21mcFRyaWdnZXIoJ0J1aWxkQ29udHJvbHMnKTsNCg0KCQkvLyByZW1vdmUgc2Nyb2xsYmFyLCBhZGQgbWFyZ2luIGUudC5jDQoJCSQoJ2h0bWwnKS5jc3Mod2luZG93U3R5bGVzKTsNCgkJDQoJCS8vIGFkZCBldmVyeXRoaW5nIHRvIERPTQ0KCQltZnAuYmdPdmVybGF5LmFkZChtZnAud3JhcCkucHJlcGVuZFRvKCBtZnAuc3QucHJlcGVuZFRvIHx8IF9ib2R5ICk7DQoNCgkJLy8gU2F2ZSBsYXN0IGZvY3VzZWQgZWxlbWVudA0KCQltZnAuX2xhc3RGb2N1c2VkRWwgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50Ow0KCQkNCgkJLy8gV2FpdCBmb3IgbmV4dCBjeWNsZSB0byBhbGxvdyBDU1MgdHJhbnNpdGlvbg0KCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KCQkJDQoJCQlpZihtZnAuY29udGVudCkgew0KCQkJCW1mcC5fYWRkQ2xhc3NUb01GUChSRUFEWV9DTEFTUyk7DQoJCQkJbWZwLl9zZXRGb2N1cygpOw0KCQkJfSBlbHNlIHsNCgkJCQkvLyBpZiBjb250ZW50IGlzIG5vdCBkZWZpbmVkIChub3QgbG9hZGVkIGUudC5jKSB3ZSBhZGQgY2xhc3Mgb25seSBmb3IgQkcNCgkJCQltZnAuYmdPdmVybGF5LmFkZENsYXNzKFJFQURZX0NMQVNTKTsNCgkJCX0NCgkJCQ0KCQkJLy8gVHJhcCB0aGUgZm9jdXMgaW4gcG9wdXANCgkJCV9kb2N1bWVudC5vbignZm9jdXNpbicgKyBFVkVOVF9OUywgbWZwLl9vbkZvY3VzSW4pOw0KDQoJCX0sIDE2KTsNCg0KCQltZnAuaXNPcGVuID0gdHJ1ZTsNCgkJbWZwLnVwZGF0ZVNpemUod2luZG93SGVpZ2h0KTsNCgkJX21mcFRyaWdnZXIoT1BFTl9FVkVOVCk7DQoNCgkJcmV0dXJuIGRhdGE7DQoJfSwNCg0KCS8qKg0KCSAqIENsb3NlcyB0aGUgcG9wdXANCgkgKi8NCgljbG9zZTogZnVuY3Rpb24oKSB7DQoJCWlmKCFtZnAuaXNPcGVuKSByZXR1cm47DQoJCV9tZnBUcmlnZ2VyKEJFRk9SRV9DTE9TRV9FVkVOVCk7DQoNCgkJbWZwLmlzT3BlbiA9IGZhbHNlOw0KCQkvLyBmb3IgQ1NTMyBhbmltYXRpb24NCgkJaWYobWZwLnN0LnJlbW92YWxEZWxheSAmJiAhbWZwLmlzTG93SUUgJiYgbWZwLnN1cHBvcnRzVHJhbnNpdGlvbiApICB7DQoJCQltZnAuX2FkZENsYXNzVG9NRlAoUkVNT1ZJTkdfQ0xBU1MpOw0KCQkJc2V0VGltZW91dChmdW5jdGlvbigpIHsNCgkJCQltZnAuX2Nsb3NlKCk7DQoJCQl9LCBtZnAuc3QucmVtb3ZhbERlbGF5KTsNCgkJfSBlbHNlIHsNCgkJCW1mcC5fY2xvc2UoKTsNCgkJfQ0KCX0sDQoNCgkvKioNCgkgKiBIZWxwZXIgZm9yIGNsb3NlKCkgZnVuY3Rpb24NCgkgKi8NCglfY2xvc2U6IGZ1bmN0aW9uKCkgew0KCQlfbWZwVHJpZ2dlcihDTE9TRV9FVkVOVCk7DQoNCgkJdmFyIGNsYXNzZXNUb1JlbW92ZSA9IFJFTU9WSU5HX0NMQVNTICsgJyAnICsgUkVBRFlfQ0xBU1MgKyAnICc7DQoNCgkJbWZwLmJnT3ZlcmxheS5kZXRhY2goKTsNCgkJbWZwLndyYXAuZGV0YWNoKCk7DQoJCW1mcC5jb250YWluZXIuZW1wdHkoKTsNCg0KCQlpZihtZnAuc3QubWFpbkNsYXNzKSB7DQoJCQljbGFzc2VzVG9SZW1vdmUgKz0gbWZwLnN0Lm1haW5DbGFzcyArICcgJzsNCgkJfQ0KDQoJCW1mcC5fcmVtb3ZlQ2xhc3NGcm9tTUZQKGNsYXNzZXNUb1JlbW92ZSk7DQoNCgkJaWYobWZwLmZpeGVkQ29udGVudFBvcykgew0KCQkJdmFyIHdpbmRvd1N0eWxlcyA9IHttYXJnaW5SaWdodDogJyd9Ow0KCQkJaWYobWZwLmlzSUU3KSB7DQoJCQkJJCgnYm9keSwgaHRtbCcpLmNzcygnb3ZlcmZsb3cnLCAnJyk7DQoJCQl9IGVsc2Ugew0KCQkJCXdpbmRvd1N0eWxlcy5vdmVyZmxvdyA9ICcnOw0KCQkJfQ0KCQkJJCgnaHRtbCcpLmNzcyh3aW5kb3dTdHlsZXMpOw0KCQl9DQoJCQ0KCQlfZG9jdW1lbnQub2ZmKCdrZXl1cCcgKyBFVkVOVF9OUyArICcgZm9jdXNpbicgKyBFVkVOVF9OUyk7DQoJCW1mcC5ldi5vZmYoRVZFTlRfTlMpOw0KDQoJCS8vIGNsZWFuIHVwIERPTSBlbGVtZW50cyB0aGF0IGFyZW4ndCByZW1vdmVkDQoJCW1mcC53cmFwLmF0dHIoJ2NsYXNzJywgJ21mcC13cmFwJykucmVtb3ZlQXR0cignc3R5bGUnKTsNCgkJbWZwLmJnT3ZlcmxheS5hdHRyKCdjbGFzcycsICdtZnAtYmcnKTsNCgkJbWZwLmNvbnRhaW5lci5hdHRyKCdjbGFzcycsICdtZnAtY29udGFpbmVyJyk7DQoNCgkJLy8gcmVtb3ZlIGNsb3NlIGJ1dHRvbiBmcm9tIHRhcmdldCBlbGVtZW50DQoJCWlmKG1mcC5zdC5zaG93Q2xvc2VCdG4gJiYNCgkJKCFtZnAuc3QuY2xvc2VCdG5JbnNpZGUgfHwgbWZwLmN1cnJUZW1wbGF0ZVttZnAuY3Vyckl0ZW0udHlwZV0gPT09IHRydWUpKSB7DQoJCQlpZihtZnAuY3VyclRlbXBsYXRlLmNsb3NlQnRuKQ0KCQkJCW1mcC5jdXJyVGVtcGxhdGUuY2xvc2VCdG4uZGV0YWNoKCk7DQoJCX0NCg0KDQoJCWlmKG1mcC5fbGFzdEZvY3VzZWRFbCkgew0KCQkJJChtZnAuX2xhc3RGb2N1c2VkRWwpLmZvY3VzKCk7IC8vIHB1dCB0YWIgZm9jdXMgYmFjaw0KCQl9DQoJCW1mcC5jdXJySXRlbSA9IG51bGw7CQ0KCQltZnAuY29udGVudCA9IG51bGw7DQoJCW1mcC5jdXJyVGVtcGxhdGUgPSBudWxsOw0KCQltZnAucHJldkhlaWdodCA9IDA7DQoNCgkJX21mcFRyaWdnZXIoQUZURVJfQ0xPU0VfRVZFTlQpOw0KCX0sDQoJDQoJdXBkYXRlU2l6ZTogZnVuY3Rpb24od2luSGVpZ2h0KSB7DQoNCgkJaWYobWZwLmlzSU9TKSB7DQoJCQkvLyBmaXhlcyBpT1MgbmF2IGJhcnMgaHR0cHM6Ly9naXRodWIuY29tL2RpbXNlbWVub3YvTWFnbmlmaWMtUG9wdXAvaXNzdWVzLzINCgkJCXZhciB6b29tTGV2ZWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggLyB3aW5kb3cuaW5uZXJXaWR0aDsNCgkJCXZhciBoZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQgKiB6b29tTGV2ZWw7DQoJCQltZnAud3JhcC5jc3MoJ2hlaWdodCcsIGhlaWdodCk7DQoJCQltZnAud0ggPSBoZWlnaHQ7DQoJCX0gZWxzZSB7DQoJCQltZnAud0ggPSB3aW5IZWlnaHQgfHwgX3dpbmRvdy5oZWlnaHQoKTsNCgkJfQ0KCQkvLyBGaXhlcyAjODQ6IHBvcHVwIGluY29ycmVjdGx5IHBvc2l0aW9uZWQgd2l0aCBwb3NpdGlvbjpyZWxhdGl2ZSBvbiBib2R5DQoJCWlmKCFtZnAuZml4ZWRDb250ZW50UG9zKSB7DQoJCQltZnAud3JhcC5jc3MoJ2hlaWdodCcsIG1mcC53SCk7DQoJCX0NCg0KCQlfbWZwVHJpZ2dlcignUmVzaXplJyk7DQoNCgl9LA0KDQoJLyoqDQoJICogU2V0IGNvbnRlbnQgb2YgcG9wdXAgYmFzZWQgb24gY3VycmVudCBpbmRleA0KCSAqLw0KCXVwZGF0ZUl0ZW1IVE1MOiBmdW5jdGlvbigpIHsNCgkJdmFyIGl0ZW0gPSBtZnAuaXRlbXNbbWZwLmluZGV4XTsNCg0KCQkvLyBEZXRhY2ggYW5kIHBlcmZvcm0gbW9kaWZpY2F0aW9ucw0KCQltZnAuY29udGVudENvbnRhaW5lci5kZXRhY2goKTsNCg0KCQlpZihtZnAuY29udGVudCkNCgkJCW1mcC5jb250ZW50LmRldGFjaCgpOw0KDQoJCWlmKCFpdGVtLnBhcnNlZCkgew0KCQkJaXRlbSA9IG1mcC5wYXJzZUVsKCBtZnAuaW5kZXggKTsNCgkJfQ0KDQoJCXZhciB0eXBlID0gaXRlbS50eXBlOwkNCg0KCQlfbWZwVHJpZ2dlcignQmVmb3JlQ2hhbmdlJywgW21mcC5jdXJySXRlbSA/IG1mcC5jdXJySXRlbS50eXBlIDogJycsIHR5cGVdKTsNCgkJLy8gQmVmb3JlQ2hhbmdlIGV2ZW50IHdvcmtzIGxpa2Ugc286DQoJCS8vIF9tZnBPbignQmVmb3JlQ2hhbmdlJywgZnVuY3Rpb24oZSwgcHJldlR5cGUsIG5ld1R5cGUpIHsgfSk7DQoJCQ0KCQltZnAuY3Vyckl0ZW0gPSBpdGVtOw0KDQoJCQ0KDQoJCQ0KDQoJCWlmKCFtZnAuY3VyclRlbXBsYXRlW3R5cGVdKSB7DQoJCQl2YXIgbWFya3VwID0gbWZwLnN0W3R5cGVdID8gbWZwLnN0W3R5cGVdLm1hcmt1cCA6IGZhbHNlOw0KDQoJCQkvLyBhbGxvd3MgdG8gbW9kaWZ5IG1hcmt1cA0KCQkJX21mcFRyaWdnZXIoJ0ZpcnN0TWFya3VwUGFyc2UnLCBtYXJrdXApOw0KDQoJCQlpZihtYXJrdXApIHsNCgkJCQltZnAuY3VyclRlbXBsYXRlW3R5cGVdID0gJChtYXJrdXApOw0KCQkJfSBlbHNlIHsNCgkJCQkvLyBpZiB0aGVyZSBpcyBubyBtYXJrdXAgZm91bmQgd2UganVzdCBkZWZpbmUgdGhhdCB0ZW1wbGF0ZSBpcyBwYXJzZWQNCgkJCQltZnAuY3VyclRlbXBsYXRlW3R5cGVdID0gdHJ1ZTsNCgkJCX0NCgkJfQ0KDQoJCWlmKF9wcmV2Q29udGVudFR5cGUgJiYgX3ByZXZDb250ZW50VHlwZSAhPT0gaXRlbS50eXBlKSB7DQoJCQltZnAuY29udGFpbmVyLnJlbW92ZUNsYXNzKCdtZnAtJytfcHJldkNvbnRlbnRUeXBlKyctaG9sZGVyJyk7DQoJCX0NCgkJDQoJCXZhciBuZXdDb250ZW50ID0gbWZwWydnZXQnICsgdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSldKGl0ZW0sIG1mcC5jdXJyVGVtcGxhdGVbdHlwZV0pOw0KCQltZnAuYXBwZW5kQ29udGVudChuZXdDb250ZW50LCB0eXBlKTsNCg0KCQlpdGVtLnByZWxvYWRlZCA9IHRydWU7DQoNCgkJX21mcFRyaWdnZXIoQ0hBTkdFX0VWRU5ULCBpdGVtKTsNCgkJX3ByZXZDb250ZW50VHlwZSA9IGl0ZW0udHlwZTsNCgkJDQoJCS8vIEFwcGVuZCBjb250YWluZXIgYmFjayBhZnRlciBpdHMgY29udGVudCBjaGFuZ2VkDQoJCW1mcC5jb250YWluZXIucHJlcGVuZChtZnAuY29udGVudENvbnRhaW5lcik7DQoNCgkJX21mcFRyaWdnZXIoJ0FmdGVyQ2hhbmdlJyk7DQoJfSwNCg0KDQoJLyoqDQoJICogU2V0IEhUTUwgY29udGVudCBvZiBwb3B1cA0KCSAqLw0KCWFwcGVuZENvbnRlbnQ6IGZ1bmN0aW9uKG5ld0NvbnRlbnQsIHR5cGUpIHsNCgkJbWZwLmNvbnRlbnQgPSBuZXdDb250ZW50Ow0KCQkNCgkJaWYobmV3Q29udGVudCkgew0KCQkJaWYobWZwLnN0LnNob3dDbG9zZUJ0biAmJiBtZnAuc3QuY2xvc2VCdG5JbnNpZGUgJiYNCgkJCQltZnAuY3VyclRlbXBsYXRlW3R5cGVdID09PSB0cnVlKSB7DQoJCQkJLy8gaWYgdGhlcmUgaXMgbm8gbWFya3VwLCB3ZSBqdXN0IGFwcGVuZCBjbG9zZSBidXR0b24gZWxlbWVudCBpbnNpZGUNCgkJCQlpZighbWZwLmNvbnRlbnQuZmluZCgnLm1mcC1jbG9zZScpLmxlbmd0aCkgew0KCQkJCQltZnAuY29udGVudC5hcHBlbmQoX2dldENsb3NlQnRuKCkpOw0KCQkJCX0NCgkJCX0gZWxzZSB7DQoJCQkJbWZwLmNvbnRlbnQgPSBuZXdDb250ZW50Ow0KCQkJfQ0KCQl9IGVsc2Ugew0KCQkJbWZwLmNvbnRlbnQgPSAnJzsNCgkJfQ0KDQoJCV9tZnBUcmlnZ2VyKEJFRk9SRV9BUFBFTkRfRVZFTlQpOw0KCQltZnAuY29udGFpbmVyLmFkZENsYXNzKCdtZnAtJyt0eXBlKyctaG9sZGVyJyk7DQoNCgkJbWZwLmNvbnRlbnRDb250YWluZXIuYXBwZW5kKG1mcC5jb250ZW50KTsNCgl9LA0KDQoNCg0KCQ0KCS8qKg0KCSAqIENyZWF0ZXMgTWFnbmlmaWMgUG9wdXAgZGF0YSBvYmplY3QgYmFzZWQgb24gZ2l2ZW4gZGF0YQ0KCSAqIEBwYXJhbSAge2ludH0gaW5kZXggSW5kZXggb2YgaXRlbSB0byBwYXJzZQ0KCSAqLw0KCXBhcnNlRWw6IGZ1bmN0aW9uKGluZGV4KSB7DQoJCXZhciBpdGVtID0gbWZwLml0ZW1zW2luZGV4XSwNCgkJCXR5cGU7DQoNCgkJaWYoaXRlbS50YWdOYW1lKSB7DQoJCQlpdGVtID0geyBlbDogJChpdGVtKSB9Ow0KCQl9IGVsc2Ugew0KCQkJdHlwZSA9IGl0ZW0udHlwZTsNCgkJCWl0ZW0gPSB7IGRhdGE6IGl0ZW0sIHNyYzogaXRlbS5zcmMgfTsNCgkJfQ0KDQoJCWlmKGl0ZW0uZWwpIHsNCgkJCXZhciB0eXBlcyA9IG1mcC50eXBlczsNCg0KCQkJLy8gY2hlY2sgZm9yICdtZnAtVFlQRScgY2xhc3MNCgkJCWZvcih2YXIgaSA9IDA7IGkgPCB0eXBlcy5sZW5ndGg7IGkrKykgew0KCQkJCWlmKCBpdGVtLmVsLmhhc0NsYXNzKCdtZnAtJyt0eXBlc1tpXSkgKSB7DQoJCQkJCXR5cGUgPSB0eXBlc1tpXTsNCgkJCQkJYnJlYWs7DQoJCQkJfQ0KCQkJfQ0KDQoJCQlpdGVtLnNyYyA9IGl0ZW0uZWwuYXR0cignZGF0YS1tZnAtc3JjJyk7DQoJCQlpZighaXRlbS5zcmMpIHsNCgkJCQlpdGVtLnNyYyA9IGl0ZW0uZWwuYXR0cignaHJlZicpOw0KCQkJfQ0KCQl9DQoNCgkJaXRlbS50eXBlID0gdHlwZSB8fCBtZnAuc3QudHlwZSB8fCAnaW5saW5lJzsNCgkJaXRlbS5pbmRleCA9IGluZGV4Ow0KCQlpdGVtLnBhcnNlZCA9IHRydWU7DQoJCW1mcC5pdGVtc1tpbmRleF0gPSBpdGVtOw0KCQlfbWZwVHJpZ2dlcignRWxlbWVudFBhcnNlJywgaXRlbSk7DQoNCgkJcmV0dXJuIG1mcC5pdGVtc1tpbmRleF07DQoJfSwNCg0KDQoJLyoqDQoJICogSW5pdGlhbGl6ZXMgc2luZ2xlIHBvcHVwIG9yIGEgZ3JvdXAgb2YgcG9wdXBzDQoJICovDQoJYWRkR3JvdXA6IGZ1bmN0aW9uKGVsLCBvcHRpb25zKSB7DQoJCXZhciBlSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHsNCgkJCWUubWZwRWwgPSB0aGlzOw0KCQkJbWZwLl9vcGVuQ2xpY2soZSwgZWwsIG9wdGlvbnMpOw0KCQl9Ow0KDQoJCWlmKCFvcHRpb25zKSB7DQoJCQlvcHRpb25zID0ge307DQoJCX0gDQoNCgkJdmFyIGVOYW1lID0gJ2NsaWNrLm1hZ25pZmljUG9wdXAnOw0KCQlvcHRpb25zLm1haW5FbCA9IGVsOw0KCQkNCgkJaWYob3B0aW9ucy5pdGVtcykgew0KCQkJb3B0aW9ucy5pc09iaiA9IHRydWU7DQoJCQllbC5vZmYoZU5hbWUpLm9uKGVOYW1lLCBlSGFuZGxlcik7DQoJCX0gZWxzZSB7DQoJCQlvcHRpb25zLmlzT2JqID0gZmFsc2U7DQoJCQlpZihvcHRpb25zLmRlbGVnYXRlKSB7DQoJCQkJZWwub2ZmKGVOYW1lKS5vbihlTmFtZSwgb3B0aW9ucy5kZWxlZ2F0ZSAsIGVIYW5kbGVyKTsNCgkJCX0gZWxzZSB7DQoJCQkJb3B0aW9ucy5pdGVtcyA9IGVsOw0KCQkJCWVsLm9mZihlTmFtZSkub24oZU5hbWUsIGVIYW5kbGVyKTsNCgkJCX0NCgkJfQ0KCX0sDQoJX29wZW5DbGljazogZnVuY3Rpb24oZSwgZWwsIG9wdGlvbnMpIHsNCgkJdmFyIG1pZENsaWNrID0gb3B0aW9ucy5taWRDbGljayAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5taWRDbGljayA6ICQubWFnbmlmaWNQb3B1cC5kZWZhdWx0cy5taWRDbGljazsNCg0KDQoJCWlmKCFtaWRDbGljayAmJiAoIGUud2hpY2ggPT09IDIgfHwgZS5jdHJsS2V5IHx8IGUubWV0YUtleSApICkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJdmFyIGRpc2FibGVPbiA9IG9wdGlvbnMuZGlzYWJsZU9uICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmRpc2FibGVPbiA6ICQubWFnbmlmaWNQb3B1cC5kZWZhdWx0cy5kaXNhYmxlT247DQoNCgkJaWYoZGlzYWJsZU9uKSB7DQoJCQlpZigkLmlzRnVuY3Rpb24oZGlzYWJsZU9uKSkgew0KCQkJCWlmKCAhZGlzYWJsZU9uLmNhbGwobWZwKSApIHsNCgkJCQkJcmV0dXJuIHRydWU7DQoJCQkJfQ0KCQkJfSBlbHNlIHsgLy8gZWxzZSBpdCdzIG51bWJlcg0KCQkJCWlmKCBfd2luZG93LndpZHRoKCkgPCBkaXNhYmxlT24gKSB7DQoJCQkJCXJldHVybiB0cnVlOw0KCQkJCX0NCgkJCX0NCgkJfQ0KCQkNCgkJaWYoZS50eXBlKSB7DQoJCQllLnByZXZlbnREZWZhdWx0KCk7DQoNCgkJCS8vIFRoaXMgd2lsbCBwcmV2ZW50IHBvcHVwIGZyb20gY2xvc2luZyBpZiBlbGVtZW50IGlzIGluc2lkZSBhbmQgcG9wdXAgaXMgYWxyZWFkeSBvcGVuZWQNCgkJCWlmKG1mcC5pc09wZW4pIHsNCgkJCQllLnN0b3BQcm9wYWdhdGlvbigpOw0KCQkJfQ0KCQl9DQoJCQkNCg0KCQlvcHRpb25zLmVsID0gJChlLm1mcEVsKTsNCgkJaWYob3B0aW9ucy5kZWxlZ2F0ZSkgew0KCQkJb3B0aW9ucy5pdGVtcyA9IGVsLmZpbmQob3B0aW9ucy5kZWxlZ2F0ZSk7DQoJCX0NCgkJbWZwLm9wZW4ob3B0aW9ucyk7DQoJfSwNCg0KDQoJLyoqDQoJICogVXBkYXRlcyB0ZXh0IG9uIHByZWxvYWRlcg0KCSAqLw0KCXVwZGF0ZVN0YXR1czogZnVuY3Rpb24oc3RhdHVzLCB0ZXh0KSB7DQoNCgkJaWYobWZwLnByZWxvYWRlcikgew0KCQkJaWYoX3ByZXZTdGF0dXMgIT09IHN0YXR1cykgew0KCQkJCW1mcC5jb250YWluZXIucmVtb3ZlQ2xhc3MoJ21mcC1zLScrX3ByZXZTdGF0dXMpOw0KCQkJfQ0KDQoJCQlpZighdGV4dCAmJiBzdGF0dXMgPT09ICdsb2FkaW5nJykgew0KCQkJCXRleHQgPSBtZnAuc3QudExvYWRpbmc7DQoJCQl9DQoNCgkJCXZhciBkYXRhID0gew0KCQkJCXN0YXR1czogc3RhdHVzLA0KCQkJCXRleHQ6IHRleHQNCgkJCX07DQoJCQkvLyBhbGxvd3MgdG8gbW9kaWZ5IHN0YXR1cw0KCQkJX21mcFRyaWdnZXIoJ1VwZGF0ZVN0YXR1cycsIGRhdGEpOw0KDQoJCQlzdGF0dXMgPSBkYXRhLnN0YXR1czsNCgkJCXRleHQgPSBkYXRhLnRleHQ7DQoNCgkJCW1mcC5wcmVsb2FkZXIuaHRtbCh0ZXh0KTsNCg0KCQkJbWZwLnByZWxvYWRlci5maW5kKCdhJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkgew0KCQkJCWUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7DQoJCQl9KTsNCg0KCQkJbWZwLmNvbnRhaW5lci5hZGRDbGFzcygnbWZwLXMtJytzdGF0dXMpOw0KCQkJX3ByZXZTdGF0dXMgPSBzdGF0dXM7DQoJCX0NCgl9LA0KDQoNCgkvKg0KCQkiUHJpdmF0ZSIgaGVscGVycyB0aGF0IGFyZW4ndCBwcml2YXRlIGF0IGFsbA0KCSAqLw0KCS8vIENoZWNrIHRvIGNsb3NlIHBvcHVwIG9yIG5vdA0KCS8vICJ0YXJnZXQiIGlzIGFuIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZA0KCV9jaGVja0lmQ2xvc2U6IGZ1bmN0aW9uKHRhcmdldCkgew0KDQoJCWlmKCQodGFyZ2V0KS5oYXNDbGFzcyhQUkVWRU5UX0NMT1NFX0NMQVNTKSkgew0KCQkJcmV0dXJuOw0KCQl9DQoNCgkJdmFyIGNsb3NlT25Db250ZW50ID0gbWZwLnN0LmNsb3NlT25Db250ZW50Q2xpY2s7DQoJCXZhciBjbG9zZU9uQmcgPSBtZnAuc3QuY2xvc2VPbkJnQ2xpY2s7DQoNCgkJaWYoY2xvc2VPbkNvbnRlbnQgJiYgY2xvc2VPbkJnKSB7DQoJCQlyZXR1cm4gdHJ1ZTsNCgkJfSBlbHNlIHsNCg0KCQkJLy8gV2UgY2xvc2UgdGhlIHBvcHVwIGlmIGNsaWNrIGlzIG9uIGNsb3NlIGJ1dHRvbiBvciBvbiBwcmVsb2FkZXIuIE9yIGlmIHRoZXJlIGlzIG5vIGNvbnRlbnQuDQoJCQlpZighbWZwLmNvbnRlbnQgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKCdtZnAtY2xvc2UnKSB8fCAobWZwLnByZWxvYWRlciAmJiB0YXJnZXQgPT09IG1mcC5wcmVsb2FkZXJbMF0pICkgew0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KDQoJCQkvLyBpZiBjbGljayBpcyBvdXRzaWRlIHRoZSBjb250ZW50DQoJCQlpZiggICh0YXJnZXQgIT09IG1mcC5jb250ZW50WzBdICYmICEkLmNvbnRhaW5zKG1mcC5jb250ZW50WzBdLCB0YXJnZXQpKSAgKSB7DQoJCQkJaWYoY2xvc2VPbkJnKSB7DQoJCQkJCS8vIGxhc3QgY2hlY2ssIGlmIHRoZSBjbGlja2VkIGVsZW1lbnQgaXMgaW4gRE9NLCAoaW4gY2FzZSBpdCdzIHJlbW92ZWQgb25jbGljaykNCgkJCQkJaWYoICQuY29udGFpbnMoZG9jdW1lbnQsIHRhcmdldCkgKSB7DQoJCQkJCQlyZXR1cm4gdHJ1ZTsNCgkJCQkJfQ0KCQkJCX0NCgkJCX0gZWxzZSBpZihjbG9zZU9uQ29udGVudCkgew0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KDQoJCX0NCgkJcmV0dXJuIGZhbHNlOw0KCX0sDQoJX2FkZENsYXNzVG9NRlA6IGZ1bmN0aW9uKGNOYW1lKSB7DQoJCW1mcC5iZ092ZXJsYXkuYWRkQ2xhc3MoY05hbWUpOw0KCQltZnAud3JhcC5hZGRDbGFzcyhjTmFtZSk7DQoJfSwNCglfcmVtb3ZlQ2xhc3NGcm9tTUZQOiBmdW5jdGlvbihjTmFtZSkgew0KCQl0aGlzLmJnT3ZlcmxheS5yZW1vdmVDbGFzcyhjTmFtZSk7DQoJCW1mcC53cmFwLnJlbW92ZUNsYXNzKGNOYW1lKTsNCgl9LA0KCV9oYXNTY3JvbGxCYXI6IGZ1bmN0aW9uKHdpbkhlaWdodCkgew0KCQlyZXR1cm4gKCAgKG1mcC5pc0lFNyA/IF9kb2N1bWVudC5oZWlnaHQoKSA6IGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0KSA+ICh3aW5IZWlnaHQgfHwgX3dpbmRvdy5oZWlnaHQoKSkgKTsNCgl9LA0KCV9zZXRGb2N1czogZnVuY3Rpb24oKSB7DQoJCShtZnAuc3QuZm9jdXMgPyBtZnAuY29udGVudC5maW5kKG1mcC5zdC5mb2N1cykuZXEoMCkgOiBtZnAud3JhcCkuZm9jdXMoKTsNCgl9LA0KCV9vbkZvY3VzSW46IGZ1bmN0aW9uKGUpIHsNCgkJaWYoIGUudGFyZ2V0ICE9PSBtZnAud3JhcFswXSAmJiAhJC5jb250YWlucyhtZnAud3JhcFswXSwgZS50YXJnZXQpICkgew0KCQkJbWZwLl9zZXRGb2N1cygpOw0KCQkJcmV0dXJuIGZhbHNlOw0KCQl9DQoJfSwNCglfcGFyc2VNYXJrdXA6IGZ1bmN0aW9uKHRlbXBsYXRlLCB2YWx1ZXMsIGl0ZW0pIHsNCgkJdmFyIGFycjsNCgkJaWYoaXRlbS5kYXRhKSB7DQoJCQl2YWx1ZXMgPSAkLmV4dGVuZChpdGVtLmRhdGEsIHZhbHVlcyk7DQoJCX0NCgkJX21mcFRyaWdnZXIoTUFSS1VQX1BBUlNFX0VWRU5ULCBbdGVtcGxhdGUsIHZhbHVlcywgaXRlbV0gKTsNCg0KCQkkLmVhY2godmFsdWVzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7DQoJCQlpZih2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBmYWxzZSkgew0KCQkJCXJldHVybiB0cnVlOw0KCQkJfQ0KCQkJYXJyID0ga2V5LnNwbGl0KCdfJyk7DQoJCQlpZihhcnIubGVuZ3RoID4gMSkgew0KCQkJCXZhciBlbCA9IHRlbXBsYXRlLmZpbmQoRVZFTlRfTlMgKyAnLScrYXJyWzBdKTsNCg0KCQkJCWlmKGVsLmxlbmd0aCA+IDApIHsNCgkJCQkJdmFyIGF0dHIgPSBhcnJbMV07DQoJCQkJCWlmKGF0dHIgPT09ICdyZXBsYWNlV2l0aCcpIHsNCgkJCQkJCWlmKGVsWzBdICE9PSB2YWx1ZVswXSkgew0KCQkJCQkJCWVsLnJlcGxhY2VXaXRoKHZhbHVlKTsNCgkJCQkJCX0NCgkJCQkJfSBlbHNlIGlmKGF0dHIgPT09ICdpbWcnKSB7DQoJCQkJCQlpZihlbC5pcygnaW1nJykpIHsNCgkJCQkJCQllbC5hdHRyKCdzcmMnLCB2YWx1ZSk7DQoJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCWVsLnJlcGxhY2VXaXRoKCAnPGltZyBzcmM9IicrdmFsdWUrJyIgY2xhc3M9IicgKyBlbC5hdHRyKCdjbGFzcycpICsgJyIgLz4nICk7DQoJCQkJCQl9DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQllbC5hdHRyKGFyclsxXSwgdmFsdWUpOw0KCQkJCQl9DQoJCQkJfQ0KDQoJCQl9IGVsc2Ugew0KCQkJCXRlbXBsYXRlLmZpbmQoRVZFTlRfTlMgKyAnLScra2V5KS5odG1sKHZhbHVlKTsNCgkJCX0NCgkJfSk7DQoJfSwNCg0KCV9nZXRTY3JvbGxiYXJTaXplOiBmdW5jdGlvbigpIHsNCgkJLy8gdGh4IERhdmlkDQoJCWlmKG1mcC5zY3JvbGxiYXJTaXplID09PSB1bmRlZmluZWQpIHsNCgkJCXZhciBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsNCgkJCXNjcm9sbERpdi5pZCA9ICJtZnAtc2JtIjsNCgkJCXNjcm9sbERpdi5zdHlsZS5jc3NUZXh0ID0gJ3dpZHRoOiA5OXB4OyBoZWlnaHQ6IDk5cHg7IG92ZXJmbG93OiBzY3JvbGw7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAtOTk5OXB4Oyc7DQoJCQlkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcm9sbERpdik7DQoJCQltZnAuc2Nyb2xsYmFyU2l6ZSA9IHNjcm9sbERpdi5vZmZzZXRXaWR0aCAtIHNjcm9sbERpdi5jbGllbnRXaWR0aDsNCgkJCWRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoc2Nyb2xsRGl2KTsNCgkJfQ0KCQlyZXR1cm4gbWZwLnNjcm9sbGJhclNpemU7DQoJfQ0KDQp9OyAvKiBNYWduaWZpY1BvcHVwIGNvcmUgcHJvdG90eXBlIGVuZCAqLw0KDQoNCg0KDQovKioNCiAqIFB1YmxpYyBzdGF0aWMgZnVuY3Rpb25zDQogKi8NCiQubWFnbmlmaWNQb3B1cCA9IHsNCglpbnN0YW5jZTogbnVsbCwNCglwcm90bzogTWFnbmlmaWNQb3B1cC5wcm90b3R5cGUsDQoJbW9kdWxlczogW10sDQoNCglvcGVuOiBmdW5jdGlvbihvcHRpb25zLCBpbmRleCkgew0KCQlfY2hlY2tJbnN0YW5jZSgpOwkNCg0KCQlpZighb3B0aW9ucykgew0KCQkJb3B0aW9ucyA9IHt9Ow0KCQl9IGVsc2Ugew0KCQkJb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTsNCgkJfQ0KCQkJDQoNCgkJb3B0aW9ucy5pc09iaiA9IHRydWU7DQoJCW9wdGlvbnMuaW5kZXggPSBpbmRleCB8fCAwOw0KCQlyZXR1cm4gdGhpcy5pbnN0YW5jZS5vcGVuKG9wdGlvbnMpOw0KCX0sDQoNCgljbG9zZTogZnVuY3Rpb24oKSB7DQoJCXJldHVybiAkLm1hZ25pZmljUG9wdXAuaW5zdGFuY2UgJiYgJC5tYWduaWZpY1BvcHVwLmluc3RhbmNlLmNsb3NlKCk7DQoJfSwNCg0KCXJlZ2lzdGVyTW9kdWxlOiBmdW5jdGlvbihuYW1lLCBtb2R1bGUpIHsNCgkJaWYobW9kdWxlLm9wdGlvbnMpIHsNCgkJCSQubWFnbmlmaWNQb3B1cC5kZWZhdWx0c1tuYW1lXSA9IG1vZHVsZS5vcHRpb25zOw0KCQl9DQoJCSQuZXh0ZW5kKHRoaXMucHJvdG8sIG1vZHVsZS5wcm90byk7CQkJDQoJCXRoaXMubW9kdWxlcy5wdXNoKG5hbWUpOw0KCX0sDQoNCglkZWZhdWx0czogeyAgIA0KDQoJCS8vIEluZm8gYWJvdXQgb3B0aW9ucyBpcyBpbiBkb2NzOg0KCQkvLyBodHRwOi8vZGltc2VtZW5vdi5jb20vcGx1Z2lucy9tYWduaWZpYy1wb3B1cC9kb2N1bWVudGF0aW9uLmh0bWwjb3B0aW9ucw0KCQkNCgkJZGlzYWJsZU9uOiAwLAkNCg0KCQlrZXk6IG51bGwsDQoNCgkJbWlkQ2xpY2s6IGZhbHNlLA0KDQoJCW1haW5DbGFzczogJycsDQoNCgkJcHJlbG9hZGVyOiB0cnVlLA0KDQoJCWZvY3VzOiAnJywgLy8gQ1NTIHNlbGVjdG9yIG9mIGlucHV0IHRvIGZvY3VzIGFmdGVyIHBvcHVwIGlzIG9wZW5lZA0KCQkNCgkJY2xvc2VPbkNvbnRlbnRDbGljazogZmFsc2UsDQoNCgkJY2xvc2VPbkJnQ2xpY2s6IHRydWUsDQoNCgkJY2xvc2VCdG5JbnNpZGU6IHRydWUsIA0KDQoJCXNob3dDbG9zZUJ0bjogdHJ1ZSwNCg0KCQllbmFibGVFc2NhcGVLZXk6IHRydWUsDQoNCgkJbW9kYWw6IGZhbHNlLA0KDQoJCWFsaWduVG9wOiBmYWxzZSwNCgkNCgkJcmVtb3ZhbERlbGF5OiAwLA0KDQoJCXByZXBlbmRUbzogbnVsbCwNCgkJDQoJCWZpeGVkQ29udGVudFBvczogJ2F1dG8nLCANCgkNCgkJZml4ZWRCZ1BvczogJ2F1dG8nLA0KDQoJCW92ZXJmbG93WTogJ2F1dG8nLA0KDQoJCWNsb3NlTWFya3VwOiAnPGJ1dHRvbiB0aXRsZT0iJXRpdGxlJSIgdHlwZT0iYnV0dG9uIiBjbGFzcz0ibWZwLWNsb3NlIj4mdGltZXM7PC9idXR0b24+JywNCg0KCQl0Q2xvc2U6ICdDbG9zZSAoRXNjKScsDQoNCgkJdExvYWRpbmc6ICdMb2FkaW5nLi4uJw0KDQoJfQ0KfTsNCg0KDQoNCiQuZm4ubWFnbmlmaWNQb3B1cCA9IGZ1bmN0aW9uKG9wdGlvbnMpIHsNCglfY2hlY2tJbnN0YW5jZSgpOw0KDQoJdmFyIGpxRWwgPSAkKHRoaXMpOw0KDQoJLy8gV2UgY2FsbCBzb21lIEFQSSBtZXRob2Qgb2YgZmlyc3QgcGFyYW0gaXMgYSBzdHJpbmcNCglpZiAodHlwZW9mIG9wdGlvbnMgPT09ICJzdHJpbmciICkgew0KDQoJCWlmKG9wdGlvbnMgPT09ICdvcGVuJykgew0KCQkJdmFyIGl0ZW1zLA0KCQkJCWl0ZW1PcHRzID0gX2lzSlEgPyBqcUVsLmRhdGEoJ21hZ25pZmljUG9wdXAnKSA6IGpxRWxbMF0ubWFnbmlmaWNQb3B1cCwNCgkJCQlpbmRleCA9IHBhcnNlSW50KGFyZ3VtZW50c1sxXSwgMTApIHx8IDA7DQoNCgkJCWlmKGl0ZW1PcHRzLml0ZW1zKSB7DQoJCQkJaXRlbXMgPSBpdGVtT3B0cy5pdGVtc1tpbmRleF07DQoJCQl9IGVsc2Ugew0KCQkJCWl0ZW1zID0ganFFbDsNCgkJCQlpZihpdGVtT3B0cy5kZWxlZ2F0ZSkgew0KCQkJCQlpdGVtcyA9IGl0ZW1zLmZpbmQoaXRlbU9wdHMuZGVsZWdhdGUpOw0KCQkJCX0NCgkJCQlpdGVtcyA9IGl0ZW1zLmVxKCBpbmRleCApOw0KCQkJfQ0KCQkJbWZwLl9vcGVuQ2xpY2soe21mcEVsOml0ZW1zfSwganFFbCwgaXRlbU9wdHMpOw0KCQl9IGVsc2Ugew0KCQkJaWYobWZwLmlzT3BlbikNCgkJCQltZnBbb3B0aW9uc10uYXBwbHkobWZwLCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTsNCgkJfQ0KDQoJfSBlbHNlIHsNCgkJLy8gY2xvbmUgb3B0aW9ucyBvYmoNCgkJb3B0aW9ucyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBvcHRpb25zKTsNCgkJDQoJCS8qDQoJCSAqIEFzIFplcHRvIGRvZXNuJ3Qgc3VwcG9ydCAuZGF0YSgpIG1ldGhvZCBmb3Igb2JqZWN0cyANCgkJICogYW5kIGl0IHdvcmtzIG9ubHkgaW4gbm9ybWFsIGJyb3dzZXJzDQoJCSAqIHdlIGFzc2lnbiAib3B0aW9ucyIgb2JqZWN0IGRpcmVjdGx5IHRvIHRoZSBET00gZWxlbWVudC4gRlRXIQ0KCQkgKi8NCgkJaWYoX2lzSlEpIHsNCgkJCWpxRWwuZGF0YSgnbWFnbmlmaWNQb3B1cCcsIG9wdGlvbnMpOw0KCQl9IGVsc2Ugew0KCQkJanFFbFswXS5tYWduaWZpY1BvcHVwID0gb3B0aW9uczsNCgkJfQ0KDQoJCW1mcC5hZGRHcm91cChqcUVsLCBvcHRpb25zKTsNCg0KCX0NCglyZXR1cm4ganFFbDsNCn07DQoNCg0KLy9RdWljayBiZW5jaG1hcmsNCi8qDQp2YXIgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKSwNCglpLA0KCXJvdW5kcyA9IDEwMDA7DQoNCmZvcihpID0gMDsgaSA8IHJvdW5kczsgaSsrKSB7DQoNCn0NCmNvbnNvbGUubG9nKCdUZXN0ICMxOicsIHBlcmZvcm1hbmNlLm5vdygpIC0gc3RhcnQpOw0KDQpzdGFydCA9IHBlcmZvcm1hbmNlLm5vdygpOw0KZm9yKGkgPSAwOyBpIDwgcm91bmRzOyBpKyspIHsNCg0KfQ0KY29uc29sZS5sb2coJ1Rlc3QgIzI6JywgcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydCk7DQoqLw0KDQoNCi8qPj5jb3JlKi8NCg0KLyo+PmlubGluZSovDQoNCnZhciBJTkxJTkVfTlMgPSAnaW5saW5lJywNCglfaGlkZGVuQ2xhc3MsDQoJX2lubGluZVBsYWNlaG9sZGVyLCANCglfbGFzdElubGluZUVsZW1lbnQsDQoJX3B1dElubGluZUVsZW1lbnRzQmFjayA9IGZ1bmN0aW9uKCkgew0KCQlpZihfbGFzdElubGluZUVsZW1lbnQpIHsNCgkJCV9pbmxpbmVQbGFjZWhvbGRlci5hZnRlciggX2xhc3RJbmxpbmVFbGVtZW50LmFkZENsYXNzKF9oaWRkZW5DbGFzcykgKS5kZXRhY2goKTsNCgkJCV9sYXN0SW5saW5lRWxlbWVudCA9IG51bGw7DQoJCX0NCgl9Ow0KDQokLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoSU5MSU5FX05TLCB7DQoJb3B0aW9uczogew0KCQloaWRkZW5DbGFzczogJ2hpZGUnLCAvLyB3aWxsIGJlIGFwcGVuZGVkIHdpdGggYG1mcC1gIHByZWZpeA0KCQltYXJrdXA6ICcnLA0KCQl0Tm90Rm91bmQ6ICdDb250ZW50IG5vdCBmb3VuZCcNCgl9LA0KCXByb3RvOiB7DQoNCgkJaW5pdElubGluZTogZnVuY3Rpb24oKSB7DQoJCQltZnAudHlwZXMucHVzaChJTkxJTkVfTlMpOw0KDQoJCQlfbWZwT24oQ0xPU0VfRVZFTlQrJy4nK0lOTElORV9OUywgZnVuY3Rpb24oKSB7DQoJCQkJX3B1dElubGluZUVsZW1lbnRzQmFjaygpOw0KCQkJfSk7DQoJCX0sDQoNCgkJZ2V0SW5saW5lOiBmdW5jdGlvbihpdGVtLCB0ZW1wbGF0ZSkgew0KDQoJCQlfcHV0SW5saW5lRWxlbWVudHNCYWNrKCk7DQoNCgkJCWlmKGl0ZW0uc3JjKSB7DQoJCQkJdmFyIGlubGluZVN0ID0gbWZwLnN0LmlubGluZSwNCgkJCQkJZWwgPSAkKGl0ZW0uc3JjKTsNCg0KCQkJCWlmKGVsLmxlbmd0aCkgew0KDQoJCQkJCS8vIElmIHRhcmdldCBlbGVtZW50IGhhcyBwYXJlbnQgLSB3ZSByZXBsYWNlIGl0IHdpdGggcGxhY2Vob2xkZXIgYW5kIHB1dCBpdCBiYWNrIGFmdGVyIHBvcHVwIGlzIGNsb3NlZA0KCQkJCQl2YXIgcGFyZW50ID0gZWxbMF0ucGFyZW50Tm9kZTsNCgkJCQkJaWYocGFyZW50ICYmIHBhcmVudC50YWdOYW1lKSB7DQoJCQkJCQlpZighX2lubGluZVBsYWNlaG9sZGVyKSB7DQoJCQkJCQkJX2hpZGRlbkNsYXNzID0gaW5saW5lU3QuaGlkZGVuQ2xhc3M7DQoJCQkJCQkJX2lubGluZVBsYWNlaG9sZGVyID0gX2dldEVsKF9oaWRkZW5DbGFzcyk7DQoJCQkJCQkJX2hpZGRlbkNsYXNzID0gJ21mcC0nK19oaWRkZW5DbGFzczsNCgkJCQkJCX0NCgkJCQkJCS8vIHJlcGxhY2UgdGFyZ2V0IGlubGluZSBlbGVtZW50IHdpdGggcGxhY2Vob2xkZXINCgkJCQkJCV9sYXN0SW5saW5lRWxlbWVudCA9IGVsLmFmdGVyKF9pbmxpbmVQbGFjZWhvbGRlcikuZGV0YWNoKCkucmVtb3ZlQ2xhc3MoX2hpZGRlbkNsYXNzKTsNCgkJCQkJfQ0KDQoJCQkJCW1mcC51cGRhdGVTdGF0dXMoJ3JlYWR5Jyk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJbWZwLnVwZGF0ZVN0YXR1cygnZXJyb3InLCBpbmxpbmVTdC50Tm90Rm91bmQpOw0KCQkJCQllbCA9ICQoJzxkaXY+Jyk7DQoJCQkJfQ0KDQoJCQkJaXRlbS5pbmxpbmVFbGVtZW50ID0gZWw7DQoJCQkJcmV0dXJuIGVsOw0KCQkJfQ0KDQoJCQltZnAudXBkYXRlU3RhdHVzKCdyZWFkeScpOw0KCQkJbWZwLl9wYXJzZU1hcmt1cCh0ZW1wbGF0ZSwge30sIGl0ZW0pOw0KCQkJcmV0dXJuIHRlbXBsYXRlOw0KCQl9DQoJfQ0KfSk7DQoNCi8qPj5pbmxpbmUqLw0KDQovKj4+YWpheCovDQp2YXIgQUpBWF9OUyA9ICdhamF4JywNCglfYWpheEN1ciwNCglfcmVtb3ZlQWpheEN1cnNvciA9IGZ1bmN0aW9uKCkgew0KCQlpZihfYWpheEN1cikgew0KCQkJX2JvZHkucmVtb3ZlQ2xhc3MoX2FqYXhDdXIpOw0KCQl9DQoJfSwNCglfZGVzdHJveUFqYXhSZXF1ZXN0ID0gZnVuY3Rpb24oKSB7DQoJCV9yZW1vdmVBamF4Q3Vyc29yKCk7DQoJCWlmKG1mcC5yZXEpIHsNCgkJCW1mcC5yZXEuYWJvcnQoKTsNCgkJfQ0KCX07DQoNCiQubWFnbmlmaWNQb3B1cC5yZWdpc3Rlck1vZHVsZShBSkFYX05TLCB7DQoNCglvcHRpb25zOiB7DQoJCXNldHRpbmdzOiBudWxsLA0KCQljdXJzb3I6ICdtZnAtYWpheC1jdXInLA0KCQl0RXJyb3I6ICc8YSBocmVmPSIldXJsJSI+VGhlIGNvbnRlbnQ8L2E+IGNvdWxkIG5vdCBiZSBsb2FkZWQuJw0KCX0sDQoNCglwcm90bzogew0KCQlpbml0QWpheDogZnVuY3Rpb24oKSB7DQoJCQltZnAudHlwZXMucHVzaChBSkFYX05TKTsNCgkJCV9hamF4Q3VyID0gbWZwLnN0LmFqYXguY3Vyc29yOw0KDQoJCQlfbWZwT24oQ0xPU0VfRVZFTlQrJy4nK0FKQVhfTlMsIF9kZXN0cm95QWpheFJlcXVlc3QpOw0KCQkJX21mcE9uKCdCZWZvcmVDaGFuZ2UuJyArIEFKQVhfTlMsIF9kZXN0cm95QWpheFJlcXVlc3QpOw0KCQl9LA0KCQlnZXRBamF4OiBmdW5jdGlvbihpdGVtKSB7DQoNCgkJCWlmKF9hamF4Q3VyKQ0KCQkJCV9ib2R5LmFkZENsYXNzKF9hamF4Q3VyKTsNCg0KCQkJbWZwLnVwZGF0ZVN0YXR1cygnbG9hZGluZycpOw0KDQoJCQl2YXIgb3B0cyA9ICQuZXh0ZW5kKHsNCgkJCQl1cmw6IGl0ZW0uc3JjLA0KCQkJCXN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEsIHRleHRTdGF0dXMsIGpxWEhSKSB7DQoJCQkJCXZhciB0ZW1wID0gew0KCQkJCQkJZGF0YTpkYXRhLA0KCQkJCQkJeGhyOmpxWEhSDQoJCQkJCX07DQoNCgkJCQkJX21mcFRyaWdnZXIoJ1BhcnNlQWpheCcsIHRlbXApOw0KDQoJCQkJCW1mcC5hcHBlbmRDb250ZW50KCAkKHRlbXAuZGF0YSksIEFKQVhfTlMgKTsNCg0KCQkJCQlpdGVtLmZpbmlzaGVkID0gdHJ1ZTsNCg0KCQkJCQlfcmVtb3ZlQWpheEN1cnNvcigpOw0KDQoJCQkJCW1mcC5fc2V0Rm9jdXMoKTsNCg0KCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KCQkJCQkJbWZwLndyYXAuYWRkQ2xhc3MoUkVBRFlfQ0xBU1MpOw0KCQkJCQl9LCAxNik7DQoNCgkJCQkJbWZwLnVwZGF0ZVN0YXR1cygncmVhZHknKTsNCg0KCQkJCQlfbWZwVHJpZ2dlcignQWpheENvbnRlbnRBZGRlZCcpOw0KCQkJCX0sDQoJCQkJZXJyb3I6IGZ1bmN0aW9uKCkgew0KCQkJCQlfcmVtb3ZlQWpheEN1cnNvcigpOw0KCQkJCQlpdGVtLmZpbmlzaGVkID0gaXRlbS5sb2FkRXJyb3IgPSB0cnVlOw0KCQkJCQltZnAudXBkYXRlU3RhdHVzKCdlcnJvcicsIG1mcC5zdC5hamF4LnRFcnJvci5yZXBsYWNlKCcldXJsJScsIGl0ZW0uc3JjKSk7DQoJCQkJfQ0KCQkJfSwgbWZwLnN0LmFqYXguc2V0dGluZ3MpOw0KDQoJCQltZnAucmVxID0gJC5hamF4KG9wdHMpOw0KDQoJCQlyZXR1cm4gJyc7DQoJCX0NCgl9DQp9KTsNCg0KDQoNCg0KDQoJDQoNCi8qPj5hamF4Ki8NCg0KLyo+PmltYWdlKi8NCnZhciBfaW1nSW50ZXJ2YWwsDQoJX2dldFRpdGxlID0gZnVuY3Rpb24oaXRlbSkgew0KCQlpZihpdGVtLmRhdGEgJiYgaXRlbS5kYXRhLnRpdGxlICE9PSB1bmRlZmluZWQpIA0KCQkJcmV0dXJuIGl0ZW0uZGF0YS50aXRsZTsNCg0KCQl2YXIgc3JjID0gbWZwLnN0LmltYWdlLnRpdGxlU3JjOw0KDQoJCWlmKHNyYykgew0KCQkJaWYoJC5pc0Z1bmN0aW9uKHNyYykpIHsNCgkJCQlyZXR1cm4gc3JjLmNhbGwobWZwLCBpdGVtKTsNCgkJCX0gZWxzZSBpZihpdGVtLmVsKSB7DQoJCQkJcmV0dXJuIGl0ZW0uZWwuYXR0cihzcmMpIHx8ICcnOw0KCQkJfQ0KCQl9DQoJCXJldHVybiAnJzsNCgl9Ow0KDQokLm1hZ25pZmljUG9wdXAucmVnaXN0ZXJNb2R1bGUoJ2ltYWdlJywgew0KDQoJb3B0aW9uczogew0KCQltYXJrdXA6ICc8ZGl2IGNsYXNzPSJtZnAtZmlndXJlIj4nKw0KCQkJCQknPGRpdiBjbGFzcz0ibWZwLWNsb3NlIj48L2Rpdj4nKw0KCQkJCQknPGZpZ3VyZT4nKw0KCQkJCQkJJzxkaXYgY2xhc3M9Im1mcC1pbWciPjwvZGl2PicrDQoJCQkJCQknPGZpZ2NhcHRpb24+JysNCgkJCQkJCQknPGRpdiBjbGFzcz0ibWZwLWJvdHRvbS1iYXIiPicrDQoJCQkJCQkJCSc8ZGl2IGNsYXNzPSJtZnAtdGl0bGUiPjwvZGl2PicrDQoJCQkJCQkJCSc8ZGl2IGNsYXNzPSJtZnAtY291bnRlciI+PC9kaXY+JysNCgkJCQkJCQknPC9kaXY+JysNCgkJCQkJCSc8L2ZpZ2NhcHRpb24+JysNCgkJCQkJJzwvZmlndXJlPicrDQoJCQkJJzwvZGl2PicsDQoJCWN1cnNvcjogJ21mcC16b29tLW91dC1jdXInLA0KCQl0aXRsZVNyYzogJ3RpdGxlJywgDQoJCXZlcnRpY2FsRml0OiB0cnVlLA0KCQl0RXJyb3I6ICc8YSBocmVmPSIldXJsJSI+VGhlIGltYWdlPC9hPiBjb3VsZCBub3QgYmUgbG9hZGVkLicNCgl9LA0KDQoJcHJvdG86IHsNCgkJaW5pdEltYWdlOiBmdW5jdGlvbigpIHsNCgkJCXZhciBpbWdTdCA9IG1mcC5zdC5pbWFnZSwNCgkJCQlucyA9ICcuaW1hZ2UnOw0KDQoJCQltZnAudHlwZXMucHVzaCgnaW1hZ2UnKTsNCg0KCQkJX21mcE9uKE9QRU5fRVZFTlQrbnMsIGZ1bmN0aW9uKCkgew0KCQkJCWlmKG1mcC5jdXJySXRlbS50eXBlID09PSAnaW1hZ2UnICYmIGltZ1N0LmN1cnNvcikgew0KCQkJCQlfYm9keS5hZGRDbGFzcyhpbWdTdC5jdXJzb3IpOw0KCQkJCX0NCgkJCX0pOw0KDQoJCQlfbWZwT24oQ0xPU0VfRVZFTlQrbnMsIGZ1bmN0aW9uKCkgew0KCQkJCWlmKGltZ1N0LmN1cnNvcikgew0KCQkJCQlfYm9keS5yZW1vdmVDbGFzcyhpbWdTdC5jdXJzb3IpOw0KCQkJCX0NCgkJCQlfd2luZG93Lm9mZigncmVzaXplJyArIEVWRU5UX05TKTsNCgkJCX0pOw0KDQoJCQlfbWZwT24oJ1Jlc2l6ZScrbnMsIG1mcC5yZXNpemVJbWFnZSk7DQoJCQlpZihtZnAuaXNMb3dJRSkgew0KCQkJCV9tZnBPbignQWZ0ZXJDaGFuZ2UnLCBtZnAucmVzaXplSW1hZ2UpOw0KCQkJfQ0KCQl9LA0KCQlyZXNpemVJbWFnZTogZnVuY3Rpb24oKSB7DQoJCQl2YXIgaXRlbSA9IG1mcC5jdXJySXRlbTsNCgkJCWlmKCFpdGVtIHx8ICFpdGVtLmltZykgcmV0dXJuOw0KDQoJCQlpZihtZnAuc3QuaW1hZ2UudmVydGljYWxGaXQpIHsNCgkJCQl2YXIgZGVjciA9IDA7DQoJCQkJLy8gZml4IGJveC1zaXppbmcgaW4gaWU3LzgNCgkJCQlpZihtZnAuaXNMb3dJRSkgew0KCQkJCQlkZWNyID0gcGFyc2VJbnQoaXRlbS5pbWcuY3NzKCdwYWRkaW5nLXRvcCcpLCAxMCkgKyBwYXJzZUludChpdGVtLmltZy5jc3MoJ3BhZGRpbmctYm90dG9tJyksMTApOw0KCQkJCX0NCgkJCQlpdGVtLmltZy5jc3MoJ21heC1oZWlnaHQnLCBtZnAud0gtZGVjcik7DQoJCQl9DQoJCX0sDQoJCV9vbkltYWdlSGFzU2l6ZTogZnVuY3Rpb24oaXRlbSkgew0KCQkJaWYoaXRlbS5pbWcpIHsNCgkJCQkNCgkJCQlpdGVtLmhhc1NpemUgPSB0cnVlOw0KDQoJCQkJaWYoX2ltZ0ludGVydmFsKSB7DQoJCQkJCWNsZWFySW50ZXJ2YWwoX2ltZ0ludGVydmFsKTsNCgkJCQl9DQoJCQkJDQoJCQkJaXRlbS5pc0NoZWNraW5nSW1nU2l6ZSA9IGZhbHNlOw0KDQoJCQkJX21mcFRyaWdnZXIoJ0ltYWdlSGFzU2l6ZScsIGl0ZW0pOw0KDQoJCQkJaWYoaXRlbS5pbWdIaWRkZW4pIHsNCgkJCQkJaWYobWZwLmNvbnRlbnQpDQoJCQkJCQltZnAuY29udGVudC5yZW1vdmVDbGFzcygnbWZwLWxvYWRpbmcnKTsNCgkJCQkJDQoJCQkJCWl0ZW0uaW1nSGlkZGVuID0gZmFsc2U7DQoJCQkJfQ0KDQoJCQl9DQoJCX0sDQoNCgkJLyoqDQoJCSAqIEZ1bmN0aW9uIHRoYXQgbG9vcHMgdW50aWwgdGhlIGltYWdlIGhhcyBzaXplIHRvIGRpc3BsYXkgZWxlbWVudHMgdGhhdCByZWx5IG9uIGl0IGFzYXANCgkJICovDQoJCWZpbmRJbWFnZVNpemU6IGZ1bmN0aW9uKGl0ZW0pIHsNCg0KCQkJdmFyIGNvdW50ZXIgPSAwLA0KCQkJCWltZyA9IGl0ZW0uaW1nWzBdLA0KCQkJCW1mcFNldEludGVydmFsID0gZnVuY3Rpb24oZGVsYXkpIHsNCg0KCQkJCQlpZihfaW1nSW50ZXJ2YWwpIHsNCgkJCQkJCWNsZWFySW50ZXJ2YWwoX2ltZ0ludGVydmFsKTsNCgkJCQkJfQ0KCQkJCQkvLyBkZWNlbGVyYXRpbmcgaW50ZXJ2YWwgdGhhdCBjaGVja3MgZm9yIHNpemUgb2YgYW4gaW1hZ2UNCgkJCQkJX2ltZ0ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKSB7DQoJCQkJCQlpZihpbWcubmF0dXJhbFdpZHRoID4gMCkgew0KCQkJCQkJCW1mcC5fb25JbWFnZUhhc1NpemUoaXRlbSk7DQoJCQkJCQkJcmV0dXJuOw0KCQkJCQkJfQ0KDQoJCQkJCQlpZihjb3VudGVyID4gMjAwKSB7DQoJCQkJCQkJY2xlYXJJbnRlcnZhbChfaW1nSW50ZXJ2YWwpOw0KCQkJCQkJfQ0KDQoJCQkJCQljb3VudGVyKys7DQoJCQkJCQlpZihjb3VudGVyID09PSAzKSB7DQoJCQkJCQkJbWZwU2V0SW50ZXJ2YWwoMTApOw0KCQkJCQkJfSBlbHNlIGlmKGNvdW50ZXIgPT09IDQwKSB7DQoJCQkJCQkJbWZwU2V0SW50ZXJ2YWwoNTApOw0KCQkJCQkJfSBlbHNlIGlmKGNvdW50ZXIgPT09IDEwMCkgew0KCQkJCQkJCW1mcFNldEludGVydmFsKDUwMCk7DQoJCQkJCQl9DQoJCQkJCX0sIGRlbGF5KTsNCgkJCQl9Ow0KDQoJCQltZnBTZXRJbnRlcnZhbCgxKTsNCgkJfSwNCg0KCQlnZXRJbWFnZTogZnVuY3Rpb24oaXRlbSwgdGVtcGxhdGUpIHsNCg0KCQkJdmFyIGd1YXJkID0gMCwNCg0KCQkJCS8vIGltYWdlIGxvYWQgY29tcGxldGUgaGFuZGxlcg0KCQkJCW9uTG9hZENvbXBsZXRlID0gZnVuY3Rpb24oKSB7DQoJCQkJCWlmKGl0ZW0pIHsNCgkJCQkJCWlmIChpdGVtLmltZ1swXS5jb21wbGV0ZSkgew0KCQkJCQkJCWl0ZW0uaW1nLm9mZignLm1mcGxvYWRlcicpOw0KCQkJCQkJCQ0KCQkJCQkJCWlmKGl0ZW0gPT09IG1mcC5jdXJySXRlbSl7DQoJCQkJCQkJCW1mcC5fb25JbWFnZUhhc1NpemUoaXRlbSk7DQoNCgkJCQkJCQkJbWZwLnVwZGF0ZVN0YXR1cygncmVhZHknKTsNCgkJCQkJCQl9DQoNCgkJCQkJCQlpdGVtLmhhc1NpemUgPSB0cnVlOw0KCQkJCQkJCWl0ZW0ubG9hZGVkID0gdHJ1ZTsNCg0KCQkJCQkJCV9tZnBUcmlnZ2VyKCdJbWFnZUxvYWRDb21wbGV0ZScpOw0KCQkJCQkJCQ0KCQkJCQkJfQ0KCQkJCQkJZWxzZSB7DQoJCQkJCQkJLy8gaWYgaW1hZ2UgY29tcGxldGUgY2hlY2sgZmFpbHMgMjAwIHRpbWVzICgyMCBzZWMpLCB3ZSBhc3N1bWUgdGhhdCB0aGVyZSB3YXMgYW4gZXJyb3IuDQoJCQkJCQkJZ3VhcmQrKzsNCgkJCQkJCQlpZihndWFyZCA8IDIwMCkgew0KCQkJCQkJCQlzZXRUaW1lb3V0KG9uTG9hZENvbXBsZXRlLDEwMCk7DQoJCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQkJb25Mb2FkRXJyb3IoKTsNCgkJCQkJCQl9DQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9LA0KDQoJCQkJLy8gaW1hZ2UgZXJyb3IgaGFuZGxlcg0KCQkJCW9uTG9hZEVycm9yID0gZnVuY3Rpb24oKSB7DQoJCQkJCWlmKGl0ZW0pIHsNCgkJCQkJCWl0ZW0uaW1nLm9mZignLm1mcGxvYWRlcicpOw0KCQkJCQkJaWYoaXRlbSA9PT0gbWZwLmN1cnJJdGVtKXsNCgkJCQkJCQltZnAuX29uSW1hZ2VIYXNTaXplKGl0ZW0pOw0KCQkJCQkJCW1mcC51cGRhdGVTdGF0dXMoJ2Vycm9yJywgaW1nU3QudEVycm9yLnJlcGxhY2UoJyV1cmwlJywgaXRlbS5zcmMpICk7DQoJCQkJCQl9DQoNCgkJCQkJCWl0ZW0uaGFzU2l6ZSA9IHRydWU7DQoJCQkJCQlpdGVtLmxvYWRlZCA9IHRydWU7DQoJCQkJCQlpdGVtLmxvYWRFcnJvciA9IHRydWU7DQoJCQkJCX0NCgkJCQl9LA0KCQkJCWltZ1N0ID0gbWZwLnN0LmltYWdlOw0KDQoNCgkJCXZhciBlbCA9IHRlbXBsYXRlLmZpbmQoJy5tZnAtaW1nJyk7DQoJCQlpZihlbC5sZW5ndGgpIHsNCgkJCQl2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7DQoJCQkJaW1nLmNsYXNzTmFtZSA9ICdtZnAtaW1nJzsNCgkJCQlpdGVtLmltZyA9ICQoaW1nKS5vbignbG9hZC5tZnBsb2FkZXInLCBvbkxvYWRDb21wbGV0ZSkub24oJ2Vycm9yLm1mcGxvYWRlcicsIG9uTG9hZEVycm9yKTsNCgkJCQlpbWcuc3JjID0gaXRlbS5zcmM7DQoNCgkJCQkvLyB3aXRob3V0IGNsb25lKCkgImVycm9yIiBldmVudCBpcyBub3QgZmlyaW5nIHdoZW4gSU1HIGlzIHJlcGxhY2VkIGJ5IG5ldyBJTUcNCgkJCQkvLyBUT0RPOiBmaW5kIGEgd2F5IHRvIGF2b2lkIHN1Y2ggY2xvbmluZw0KCQkJCWlmKGVsLmlzKCdpbWcnKSkgew0KCQkJCQlpdGVtLmltZyA9IGl0ZW0uaW1nLmNsb25lKCk7DQoJCQkJfQ0KDQoJCQkJaW1nID0gaXRlbS5pbWdbMF07DQoJCQkJaWYoaW1nLm5hdHVyYWxXaWR0aCA+IDApIHsNCgkJCQkJaXRlbS5oYXNTaXplID0gdHJ1ZTsNCgkJCQl9IGVsc2UgaWYoIWltZy53aWR0aCkgewkJCQkJCQkJCQkNCgkJCQkJaXRlbS5oYXNTaXplID0gZmFsc2U7DQoJCQkJfQ0KCQkJfQ0KDQoJCQltZnAuX3BhcnNlTWFya3VwKHRlbXBsYXRlLCB7DQoJCQkJdGl0bGU6IF9nZXRUaXRsZShpdGVtKSwNCgkJCQlpbWdfcmVwbGFjZVdpdGg6IGl0ZW0uaW1nDQoJCQl9LCBpdGVtKTsNCg0KCQkJbWZwLnJlc2l6ZUltYWdlKCk7DQoNCgkJCWlmKGl0ZW0uaGFzU2l6ZSkgew0KCQkJCWlmKF9pbWdJbnRlcnZhbCkgY2xlYXJJbnRlcnZhbChfaW1nSW50ZXJ2YWwpOw0KDQoJCQkJaWYoaXRlbS5sb2FkRXJyb3IpIHsNCgkJCQkJdGVtcGxhdGUuYWRkQ2xhc3MoJ21mcC1sb2FkaW5nJyk7DQoJCQkJCW1mcC51cGRhdGVTdGF0dXMoJ2Vycm9yJywgaW1nU3QudEVycm9yLnJlcGxhY2UoJyV1cmwlJywgaXRlbS5zcmMpICk7DQoJCQkJfSBlbHNlIHsNCgkJCQkJdGVtcGxhdGUucmVtb3ZlQ2xhc3MoJ21mcC1sb2FkaW5nJyk7DQoJCQkJCW1mcC51cGRhdGVTdGF0dXMoJ3JlYWR5Jyk7DQoJCQkJfQ0KCQkJCXJldHVybiB0ZW1wbGF0ZTsNCgkJCX0NCg0KCQkJbWZwLnVwZGF0ZVN0YXR1cygnbG9hZGluZycpOw0KCQkJaXRlbS5sb2FkaW5nID0gdHJ1ZTsNCg0KCQkJaWYoIWl0ZW0uaGFzU2l6ZSkgew0KCQkJCWl0ZW0uaW1nSGlkZGVuID0gdHJ1ZTsNCgkJCQl0ZW1wbGF0ZS5hZGRDbGFzcygnbWZwLWxvYWRpbmcnKTsNCgkJCQltZnAuZmluZEltYWdlU2l6ZShpdGVtKTsNCgkJCX0gDQoNCgkJCXJldHVybiB0ZW1wbGF0ZTsNCgkJfQ0KCX0NCn0pOw0KDQoNCg0KLyo+PmltYWdlKi8NCg0KLyo+Pnpvb20qLw0KdmFyIGhhc01velRyYW5zZm9ybSwNCglnZXRIYXNNb3pUcmFuc2Zvcm0gPSBmdW5jdGlvbigpIHsNCgkJaWYoaGFzTW96VHJhbnNmb3JtID09PSB1bmRlZmluZWQpIHsNCgkJCWhhc01velRyYW5zZm9ybSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKS5zdHlsZS5Nb3pUcmFuc2Zvcm0gIT09IHVuZGVmaW5lZDsNCgkJfQ0KCQlyZXR1cm4gaGFzTW96VHJhbnNmb3JtOwkJDQoJfTsNCg0KJC5tYWduaWZpY1BvcHVwLnJlZ2lzdGVyTW9kdWxlKCd6b29tJywgew0KDQoJb3B0aW9uczogew0KCQllbmFibGVkOiBmYWxzZSwNCgkJZWFzaW5nOiAnZWFzZS1pbi1vdXQnLA0KCQlkdXJhdGlvbjogMzAwLA0KCQlvcGVuZXI6IGZ1bmN0aW9uKGVsZW1lbnQpIHsNCgkJCXJldHVybiBlbGVtZW50LmlzKCdpbWcnKSA/IGVsZW1lbnQgOiBlbGVtZW50LmZpbmQoJ2ltZycpOw0KCQl9DQoJfSwNCg0KCXByb3RvOiB7DQoNCgkJaW5pdFpvb206IGZ1bmN0aW9uKCkgew0KCQkJdmFyIHpvb21TdCA9IG1mcC5zdC56b29tLA0KCQkJCW5zID0gJy56b29tJywNCgkJCQlpbWFnZTsNCgkJCQkNCgkJCWlmKCF6b29tU3QuZW5hYmxlZCB8fCAhbWZwLnN1cHBvcnRzVHJhbnNpdGlvbikgew0KCQkJCXJldHVybjsNCgkJCX0NCg0KCQkJdmFyIGR1cmF0aW9uID0gem9vbVN0LmR1cmF0aW9uLA0KCQkJCWdldEVsVG9BbmltYXRlID0gZnVuY3Rpb24oaW1hZ2UpIHsNCgkJCQkJdmFyIG5ld0ltZyA9IGltYWdlLmNsb25lKCkucmVtb3ZlQXR0cignc3R5bGUnKS5yZW1vdmVBdHRyKCdjbGFzcycpLmFkZENsYXNzKCdtZnAtYW5pbWF0ZWQtaW1hZ2UnKSwNCgkJCQkJCXRyYW5zaXRpb24gPSAnYWxsICcrKHpvb21TdC5kdXJhdGlvbi8xMDAwKSsncyAnICsgem9vbVN0LmVhc2luZywNCgkJCQkJCWNzc09iaiA9IHsNCgkJCQkJCQlwb3NpdGlvbjogJ2ZpeGVkJywNCgkJCQkJCQl6SW5kZXg6IDk5OTksDQoJCQkJCQkJbGVmdDogMCwNCgkJCQkJCQl0b3A6IDAsDQoJCQkJCQkJJy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eSc6ICdoaWRkZW4nDQoJCQkJCQl9LA0KCQkJCQkJdCA9ICd0cmFuc2l0aW9uJzsNCg0KCQkJCQljc3NPYmpbJy13ZWJraXQtJyt0XSA9IGNzc09ialsnLW1vei0nK3RdID0gY3NzT2JqWyctby0nK3RdID0gY3NzT2JqW3RdID0gdHJhbnNpdGlvbjsNCg0KCQkJCQluZXdJbWcuY3NzKGNzc09iaik7DQoJCQkJCXJldHVybiBuZXdJbWc7DQoJCQkJfSwNCgkJCQlzaG93TWFpbkNvbnRlbnQgPSBmdW5jdGlvbigpIHsNCgkJCQkJbWZwLmNvbnRlbnQuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKTsNCgkJCQl9LA0KCQkJCW9wZW5UaW1lb3V0LA0KCQkJCWFuaW1hdGVkSW1nOw0KDQoJCQlfbWZwT24oJ0J1aWxkQ29udHJvbHMnK25zLCBmdW5jdGlvbigpIHsNCgkJCQlpZihtZnAuX2FsbG93Wm9vbSgpKSB7DQoNCgkJCQkJY2xlYXJUaW1lb3V0KG9wZW5UaW1lb3V0KTsNCgkJCQkJbWZwLmNvbnRlbnQuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpOw0KDQoJCQkJCS8vIEJhc2ljYWxseSwgYWxsIGNvZGUgYmVsb3cgZG9lcyBpcyBjbG9uZXMgZXhpc3RpbmcgaW1hZ2UsIHB1dHMgaW4gb24gdG9wIG9mIHRoZSBjdXJyZW50IG9uZSBhbmQgYW5pbWF0ZWQgaXQNCgkJCQkJDQoJCQkJCWltYWdlID0gbWZwLl9nZXRJdGVtVG9ab29tKCk7DQoNCgkJCQkJaWYoIWltYWdlKSB7DQoJCQkJCQlzaG93TWFpbkNvbnRlbnQoKTsNCgkJCQkJCXJldHVybjsNCgkJCQkJfQ0KDQoJCQkJCWFuaW1hdGVkSW1nID0gZ2V0RWxUb0FuaW1hdGUoaW1hZ2UpOyANCgkJCQkJDQoJCQkJCWFuaW1hdGVkSW1nLmNzcyggbWZwLl9nZXRPZmZzZXQoKSApOw0KDQoJCQkJCW1mcC53cmFwLmFwcGVuZChhbmltYXRlZEltZyk7DQoNCgkJCQkJb3BlblRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KCQkJCQkJYW5pbWF0ZWRJbWcuY3NzKCBtZnAuX2dldE9mZnNldCggdHJ1ZSApICk7DQoJCQkJCQlvcGVuVGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQoNCgkJCQkJCQlzaG93TWFpbkNvbnRlbnQoKTsNCg0KCQkJCQkJCXNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQoJCQkJCQkJCWFuaW1hdGVkSW1nLnJlbW92ZSgpOw0KCQkJCQkJCQlpbWFnZSA9IGFuaW1hdGVkSW1nID0gbnVsbDsNCgkJCQkJCQkJX21mcFRyaWdnZXIoJ1pvb21BbmltYXRpb25FbmRlZCcpOw0KCQkJCQkJCX0sIDE2KTsgLy8gYXZvaWQgYmxpbmsgd2hlbiBzd2l0Y2hpbmcgaW1hZ2VzIA0KDQoJCQkJCQl9LCBkdXJhdGlvbik7IC8vIHRoaXMgdGltZW91dCBlcXVhbHMgYW5pbWF0aW9uIGR1cmF0aW9uDQoNCgkJCQkJfSwgMTYpOyAvLyBieSBhZGRpbmcgdGhpcyB0aW1lb3V0IHdlIGF2b2lkIHNob3J0IGdsaXRjaCBhdCB0aGUgYmVnaW5uaW5nIG9mIGFuaW1hdGlvbg0KDQoNCgkJCQkJLy8gTG90cyBvZiB0aW1lb3V0cy4uLg0KCQkJCX0NCgkJCX0pOw0KCQkJX21mcE9uKEJFRk9SRV9DTE9TRV9FVkVOVCtucywgZnVuY3Rpb24oKSB7DQoJCQkJaWYobWZwLl9hbGxvd1pvb20oKSkgew0KDQoJCQkJCWNsZWFyVGltZW91dChvcGVuVGltZW91dCk7DQoNCgkJCQkJbWZwLnN0LnJlbW92YWxEZWxheSA9IGR1cmF0aW9uOw0KDQoJCQkJCWlmKCFpbWFnZSkgew0KCQkJCQkJaW1hZ2UgPSBtZnAuX2dldEl0ZW1Ub1pvb20oKTsNCgkJCQkJCWlmKCFpbWFnZSkgew0KCQkJCQkJCXJldHVybjsNCgkJCQkJCX0NCgkJCQkJCWFuaW1hdGVkSW1nID0gZ2V0RWxUb0FuaW1hdGUoaW1hZ2UpOw0KCQkJCQl9DQoJCQkJCQ0KCQkJCQkNCgkJCQkJYW5pbWF0ZWRJbWcuY3NzKCBtZnAuX2dldE9mZnNldCh0cnVlKSApOw0KCQkJCQltZnAud3JhcC5hcHBlbmQoYW5pbWF0ZWRJbWcpOw0KCQkJCQltZnAuY29udGVudC5jc3MoJ3Zpc2liaWxpdHknLCAnaGlkZGVuJyk7DQoJCQkJCQ0KCQkJCQlzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KCQkJCQkJYW5pbWF0ZWRJbWcuY3NzKCBtZnAuX2dldE9mZnNldCgpICk7DQoJCQkJCX0sIDE2KTsNCgkJCQl9DQoNCgkJCX0pOw0KDQoJCQlfbWZwT24oQ0xPU0VfRVZFTlQrbnMsIGZ1bmN0aW9uKCkgew0KCQkJCWlmKG1mcC5fYWxsb3dab29tKCkpIHsNCgkJCQkJc2hvd01haW5Db250ZW50KCk7DQoJCQkJCWlmKGFuaW1hdGVkSW1nKSB7DQoJCQkJCQlhbmltYXRlZEltZy5yZW1vdmUoKTsNCgkJCQkJfQ0KCQkJCQlpbWFnZSA9IG51bGw7DQoJCQkJfQkNCgkJCX0pOw0KCQl9LA0KDQoJCV9hbGxvd1pvb206IGZ1bmN0aW9uKCkgew0KCQkJcmV0dXJuIG1mcC5jdXJySXRlbS50eXBlID09PSAnaW1hZ2UnOw0KCQl9LA0KDQoJCV9nZXRJdGVtVG9ab29tOiBmdW5jdGlvbigpIHsNCgkJCWlmKG1mcC5jdXJySXRlbS5oYXNTaXplKSB7DQoJCQkJcmV0dXJuIG1mcC5jdXJySXRlbS5pbWc7DQoJCQl9IGVsc2Ugew0KCQkJCXJldHVybiBmYWxzZTsNCgkJCX0NCgkJfSwNCg0KCQkvLyBHZXQgZWxlbWVudCBwb3N0aW9uIHJlbGF0aXZlIHRvIHZpZXdwb3J0DQoJCV9nZXRPZmZzZXQ6IGZ1bmN0aW9uKGlzTGFyZ2UpIHsNCgkJCXZhciBlbDsNCgkJCWlmKGlzTGFyZ2UpIHsNCgkJCQllbCA9IG1mcC5jdXJySXRlbS5pbWc7DQoJCQl9IGVsc2Ugew0KCQkJCWVsID0gbWZwLnN0Lnpvb20ub3BlbmVyKG1mcC5jdXJySXRlbS5lbCB8fCBtZnAuY3Vyckl0ZW0pOw0KCQkJfQ0KDQoJCQl2YXIgb2Zmc2V0ID0gZWwub2Zmc2V0KCk7DQoJCQl2YXIgcGFkZGluZ1RvcCA9IHBhcnNlSW50KGVsLmNzcygncGFkZGluZy10b3AnKSwxMCk7DQoJCQl2YXIgcGFkZGluZ0JvdHRvbSA9IHBhcnNlSW50KGVsLmNzcygncGFkZGluZy1ib3R0b20nKSwxMCk7DQoJCQlvZmZzZXQudG9wIC09ICggJCh3aW5kb3cpLnNjcm9sbFRvcCgpIC0gcGFkZGluZ1RvcCApOw0KDQoNCgkJCS8qDQoJCQkNCgkJCUFuaW1hdGluZyBsZWZ0ICsgdG9wICsgd2lkdGgvaGVpZ2h0IGxvb2tzIGdsaXRjaHkgaW4gRmlyZWZveCwgYnV0IHBlcmZlY3QgaW4gQ2hyb21lLiBBbmQgdmljZS12ZXJzYS4NCg0KCQkJICovDQoJCQl2YXIgb2JqID0gew0KCQkJCXdpZHRoOiBlbC53aWR0aCgpLA0KCQkJCS8vIGZpeCBaZXB0byBoZWlnaHQrcGFkZGluZyBpc3N1ZQ0KCQkJCWhlaWdodDogKF9pc0pRID8gZWwuaW5uZXJIZWlnaHQoKSA6IGVsWzBdLm9mZnNldEhlaWdodCkgLSBwYWRkaW5nQm90dG9tIC0gcGFkZGluZ1RvcA0KCQkJfTsNCg0KCQkJLy8gSSBoYXRlIHRvIGRvIHRoaXMsIGJ1dCB0aGVyZSBpcyBubyBhbm90aGVyIG9wdGlvbg0KCQkJaWYoIGdldEhhc01velRyYW5zZm9ybSgpICkgew0KCQkJCW9ialsnLW1vei10cmFuc2Zvcm0nXSA9IG9ialsndHJhbnNmb3JtJ10gPSAndHJhbnNsYXRlKCcgKyBvZmZzZXQubGVmdCArICdweCwnICsgb2Zmc2V0LnRvcCArICdweCknOw0KCQkJfSBlbHNlIHsNCgkJCQlvYmoubGVmdCA9IG9mZnNldC5sZWZ0Ow0KCQkJCW9iai50b3AgPSBvZmZzZXQudG9wOw0KCQkJfQ0KCQkJcmV0dXJuIG9iajsNCgkJfQ0KDQoJfQ0KfSk7DQoNCg0KDQovKj4+em9vbSovDQoNCi8qPj5pZnJhbWUqLw0KDQp2YXIgSUZSQU1FX05TID0gJ2lmcmFtZScsDQoJX2VtcHR5UGFnZSA9ICcvL2Fib3V0OmJsYW5rJywNCgkNCglfZml4SWZyYW1lQnVncyA9IGZ1bmN0aW9uKGlzU2hvd2luZykgew0KCQlpZihtZnAuY3VyclRlbXBsYXRlW0lGUkFNRV9OU10pIHsNCgkJCXZhciBlbCA9IG1mcC5jdXJyVGVtcGxhdGVbSUZSQU1FX05TXS5maW5kKCdpZnJhbWUnKTsNCgkJCWlmKGVsLmxlbmd0aCkgeyANCgkJCQkvLyByZXNldCBzcmMgYWZ0ZXIgdGhlIHBvcHVwIGlzIGNsb3NlZCB0byBhdm9pZCAidmlkZW8ga2VlcHMgcGxheWluZyBhZnRlciBwb3B1cCBpcyBjbG9zZWQiIGJ1Zw0KCQkJCWlmKCFpc1Nob3dpbmcpIHsNCgkJCQkJZWxbMF0uc3JjID0gX2VtcHR5UGFnZTsNCgkJCQl9DQoNCgkJCQkvLyBJRTggYmxhY2sgc2NyZWVuIGJ1ZyBmaXgNCgkJCQlpZihtZnAuaXNJRTgpIHsNCgkJCQkJZWwuY3NzKCdkaXNwbGF5JywgaXNTaG93aW5nID8gJ2Jsb2NrJyA6ICdub25lJyk7DQoJCQkJfQ0KCQkJfQ0KCQl9DQoJfTsNCg0KJC5tYWduaWZpY1BvcHVwLnJlZ2lzdGVyTW9kdWxlKElGUkFNRV9OUywgew0KDQoJb3B0aW9uczogew0KCQltYXJrdXA6ICc8ZGl2IGNsYXNzPSJtZnAtaWZyYW1lLXNjYWxlciI+JysNCgkJCQkJJzxkaXYgY2xhc3M9Im1mcC1jbG9zZSI+PC9kaXY+JysNCgkJCQkJJzxpZnJhbWUgY2xhc3M9Im1mcC1pZnJhbWUiIHNyYz0iLy9hYm91dDpibGFuayIgZnJhbWVib3JkZXI9IjAiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT4nKw0KCQkJCSc8L2Rpdj4nLA0KDQoJCXNyY0FjdGlvbjogJ2lmcmFtZV9zcmMnLA0KDQoJCS8vIHdlIGRvbid0IGNhcmUgYW5kIHN1cHBvcnQgb25seSBvbmUgZGVmYXVsdCB0eXBlIG9mIFVSTCBieSBkZWZhdWx0DQoJCXBhdHRlcm5zOiB7DQoJCQl5b3V0dWJlOiB7DQoJCQkJaW5kZXg6ICd5b3V0dWJlLmNvbScsIA0KCQkJCWlkOiAndj0nLCANCgkJCQlzcmM6ICcvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC8laWQlP2F1dG9wbGF5PTEnDQoJCQl9LA0KCQkJdmltZW86IHsNCgkJCQlpbmRleDogJ3ZpbWVvLmNvbS8nLA0KCQkJCWlkOiAnLycsDQoJCQkJc3JjOiAnLy9wbGF5ZXIudmltZW8uY29tL3ZpZGVvLyVpZCU/YXV0b3BsYXk9MScNCgkJCX0sDQoJCQlnbWFwczogew0KCQkJCWluZGV4OiAnLy9tYXBzLmdvb2dsZS4nLA0KCQkJCXNyYzogJyVpZCUmb3V0cHV0PWVtYmVkJw0KCQkJfQ0KCQl9DQoJfSwNCg0KCXByb3RvOiB7DQoJCWluaXRJZnJhbWU6IGZ1bmN0aW9uKCkgew0KCQkJbWZwLnR5cGVzLnB1c2goSUZSQU1FX05TKTsNCg0KCQkJX21mcE9uKCdCZWZvcmVDaGFuZ2UnLCBmdW5jdGlvbihlLCBwcmV2VHlwZSwgbmV3VHlwZSkgew0KCQkJCWlmKHByZXZUeXBlICE9PSBuZXdUeXBlKSB7DQoJCQkJCWlmKHByZXZUeXBlID09PSBJRlJBTUVfTlMpIHsNCgkJCQkJCV9maXhJZnJhbWVCdWdzKCk7IC8vIGlmcmFtZSBpZiByZW1vdmVkDQoJCQkJCX0gZWxzZSBpZihuZXdUeXBlID09PSBJRlJBTUVfTlMpIHsNCgkJCQkJCV9maXhJZnJhbWVCdWdzKHRydWUpOyAvLyBpZnJhbWUgaXMgc2hvd2luZw0KCQkJCQl9IA0KCQkJCX0vLyBlbHNlIHsNCgkJCQkJLy8gaWZyYW1lIHNvdXJjZSBpcyBzd2l0Y2hlZCwgZG9uJ3QgZG8gYW55dGhpbmcNCgkJCQkvL30NCgkJCX0pOw0KDQoJCQlfbWZwT24oQ0xPU0VfRVZFTlQgKyAnLicgKyBJRlJBTUVfTlMsIGZ1bmN0aW9uKCkgew0KCQkJCV9maXhJZnJhbWVCdWdzKCk7DQoJCQl9KTsNCgkJfSwNCg0KCQlnZXRJZnJhbWU6IGZ1bmN0aW9uKGl0ZW0sIHRlbXBsYXRlKSB7DQoJCQl2YXIgZW1iZWRTcmMgPSBpdGVtLnNyYzsNCgkJCXZhciBpZnJhbWVTdCA9IG1mcC5zdC5pZnJhbWU7DQoJCQkJDQoJCQkkLmVhY2goaWZyYW1lU3QucGF0dGVybnMsIGZ1bmN0aW9uKCkgew0KCQkJCWlmKGVtYmVkU3JjLmluZGV4T2YoIHRoaXMuaW5kZXggKSA+IC0xKSB7DQoJCQkJCWlmKHRoaXMuaWQpIHsNCgkJCQkJCWlmKHR5cGVvZiB0aGlzLmlkID09PSAnc3RyaW5nJykgew0KCQkJCQkJCWVtYmVkU3JjID0gZW1iZWRTcmMuc3Vic3RyKGVtYmVkU3JjLmxhc3RJbmRleE9mKHRoaXMuaWQpK3RoaXMuaWQubGVuZ3RoLCBlbWJlZFNyYy5sZW5ndGgpOw0KCQkJCQkJfSBlbHNlIHsNCgkJCQkJCQllbWJlZFNyYyA9IHRoaXMuaWQuY2FsbCggdGhpcywgZW1iZWRTcmMgKTsNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCQllbWJlZFNyYyA9IHRoaXMuc3JjLnJlcGxhY2UoJyVpZCUnLCBlbWJlZFNyYyApOw0KCQkJCQlyZXR1cm4gZmFsc2U7IC8vIGJyZWFrOw0KCQkJCX0NCgkJCX0pOw0KCQkJDQoJCQl2YXIgZGF0YU9iaiA9IHt9Ow0KCQkJaWYoaWZyYW1lU3Quc3JjQWN0aW9uKSB7DQoJCQkJZGF0YU9ialtpZnJhbWVTdC5zcmNBY3Rpb25dID0gZW1iZWRTcmM7DQoJCQl9DQoJCQltZnAuX3BhcnNlTWFya3VwKHRlbXBsYXRlLCBkYXRhT2JqLCBpdGVtKTsNCg0KCQkJbWZwLnVwZGF0ZVN0YXR1cygncmVhZHknKTsNCg0KCQkJcmV0dXJuIHRlbXBsYXRlOw0KCQl9DQoJfQ0KfSk7DQoNCg0KDQovKj4+aWZyYW1lKi8NCg0KLyo+PmdhbGxlcnkqLw0KLyoqDQogKiBHZXQgbG9vcGVkIGluZGV4IGRlcGVuZGluZyBvbiBudW1iZXIgb2Ygc2xpZGVzDQogKi8NCnZhciBfZ2V0TG9vcGVkSWQgPSBmdW5jdGlvbihpbmRleCkgew0KCQl2YXIgbnVtU2xpZGVzID0gbWZwLml0ZW1zLmxlbmd0aDsNCgkJaWYoaW5kZXggPiBudW1TbGlkZXMgLSAxKSB7DQoJCQlyZXR1cm4gaW5kZXggLSBudW1TbGlkZXM7DQoJCX0gZWxzZSAgaWYoaW5kZXggPCAwKSB7DQoJCQlyZXR1cm4gbnVtU2xpZGVzICsgaW5kZXg7DQoJCX0NCgkJcmV0dXJuIGluZGV4Ow0KCX0sDQoJX3JlcGxhY2VDdXJyVG90YWwgPSBmdW5jdGlvbih0ZXh0LCBjdXJyLCB0b3RhbCkgew0KCQlyZXR1cm4gdGV4dC5yZXBsYWNlKC8lY3VyciUvZ2ksIGN1cnIgKyAxKS5yZXBsYWNlKC8ldG90YWwlL2dpLCB0b3RhbCk7DQoJfTsNCg0KJC5tYWduaWZpY1BvcHVwLnJlZ2lzdGVyTW9kdWxlKCdnYWxsZXJ5Jywgew0KDQoJb3B0aW9uczogew0KCQllbmFibGVkOiBmYWxzZSwNCgkJYXJyb3dNYXJrdXA6ICc8YnV0dG9uIHRpdGxlPSIldGl0bGUlIiB0eXBlPSJidXR0b24iIGNsYXNzPSJtZnAtYXJyb3cgbWZwLWFycm93LSVkaXIlIj48L2J1dHRvbj4nLA0KCQlwcmVsb2FkOiBbMCwyXSwNCgkJbmF2aWdhdGVCeUltZ0NsaWNrOiB0cnVlLA0KCQlhcnJvd3M6IHRydWUsDQoNCgkJdFByZXY6ICdQcmV2aW91cyAoTGVmdCBhcnJvdyBrZXkpJywNCgkJdE5leHQ6ICdOZXh0IChSaWdodCBhcnJvdyBrZXkpJywNCgkJdENvdW50ZXI6ICclY3VyciUgb2YgJXRvdGFsJScNCgl9LA0KDQoJcHJvdG86IHsNCgkJaW5pdEdhbGxlcnk6IGZ1bmN0aW9uKCkgew0KDQoJCQl2YXIgZ1N0ID0gbWZwLnN0LmdhbGxlcnksDQoJCQkJbnMgPSAnLm1mcC1nYWxsZXJ5JywNCgkJCQlzdXBwb3J0c0Zhc3RDbGljayA9IEJvb2xlYW4oJC5mbi5tZnBGYXN0Q2xpY2spOw0KDQoJCQltZnAuZGlyZWN0aW9uID0gdHJ1ZTsgLy8gdHJ1ZSAtIG5leHQsIGZhbHNlIC0gcHJldg0KCQkJDQoJCQlpZighZ1N0IHx8ICFnU3QuZW5hYmxlZCApIHJldHVybiBmYWxzZTsNCg0KCQkJX3dyYXBDbGFzc2VzICs9ICcgbWZwLWdhbGxlcnknOw0KDQoJCQlfbWZwT24oT1BFTl9FVkVOVCtucywgZnVuY3Rpb24oKSB7DQoNCgkJCQlpZihnU3QubmF2aWdhdGVCeUltZ0NsaWNrKSB7DQoJCQkJCW1mcC53cmFwLm9uKCdjbGljaycrbnMsICcubWZwLWltZycsIGZ1bmN0aW9uKCkgew0KCQkJCQkJaWYobWZwLml0ZW1zLmxlbmd0aCA+IDEpIHsNCgkJCQkJCQltZnAubmV4dCgpOw0KCQkJCQkJCXJldHVybiBmYWxzZTsNCgkJCQkJCX0NCgkJCQkJfSk7DQoJCQkJfQ0KDQoJCQkJX2RvY3VtZW50Lm9uKCdrZXlkb3duJytucywgZnVuY3Rpb24oZSkgew0KCQkJCQlpZiAoZS5rZXlDb2RlID09PSAzNykgew0KCQkJCQkJbWZwLnByZXYoKTsNCgkJCQkJfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM5KSB7DQoJCQkJCQltZnAubmV4dCgpOw0KCQkJCQl9DQoJCQkJfSk7DQoJCQl9KTsNCg0KCQkJX21mcE9uKCdVcGRhdGVTdGF0dXMnK25zLCBmdW5jdGlvbihlLCBkYXRhKSB7DQoJCQkJaWYoZGF0YS50ZXh0KSB7DQoJCQkJCWRhdGEudGV4dCA9IF9yZXBsYWNlQ3VyclRvdGFsKGRhdGEudGV4dCwgbWZwLmN1cnJJdGVtLmluZGV4LCBtZnAuaXRlbXMubGVuZ3RoKTsNCgkJCQl9DQoJCQl9KTsNCg0KCQkJX21mcE9uKE1BUktVUF9QQVJTRV9FVkVOVCtucywgZnVuY3Rpb24oZSwgZWxlbWVudCwgdmFsdWVzLCBpdGVtKSB7DQoJCQkJdmFyIGwgPSBtZnAuaXRlbXMubGVuZ3RoOw0KCQkJCXZhbHVlcy5jb3VudGVyID0gbCA+IDEgPyBfcmVwbGFjZUN1cnJUb3RhbChnU3QudENvdW50ZXIsIGl0ZW0uaW5kZXgsIGwpIDogJyc7DQoJCQl9KTsNCg0KCQkJX21mcE9uKCdCdWlsZENvbnRyb2xzJyArIG5zLCBmdW5jdGlvbigpIHsNCgkJCQlpZihtZnAuaXRlbXMubGVuZ3RoID4gMSAmJiBnU3QuYXJyb3dzICYmICFtZnAuYXJyb3dMZWZ0KSB7DQoJCQkJCXZhciBtYXJrdXAgPSBnU3QuYXJyb3dNYXJrdXAsDQoJCQkJCQlhcnJvd0xlZnQgPSBtZnAuYXJyb3dMZWZ0ID0gJCggbWFya3VwLnJlcGxhY2UoLyV0aXRsZSUvZ2ksIGdTdC50UHJldikucmVwbGFjZSgvJWRpciUvZ2ksICdsZWZ0JykgKS5hZGRDbGFzcyhQUkVWRU5UX0NMT1NFX0NMQVNTKSwJCQkNCgkJCQkJCWFycm93UmlnaHQgPSBtZnAuYXJyb3dSaWdodCA9ICQoIG1hcmt1cC5yZXBsYWNlKC8ldGl0bGUlL2dpLCBnU3QudE5leHQpLnJlcGxhY2UoLyVkaXIlL2dpLCAncmlnaHQnKSApLmFkZENsYXNzKFBSRVZFTlRfQ0xPU0VfQ0xBU1MpOw0KDQoJCQkJCXZhciBlTmFtZSA9IHN1cHBvcnRzRmFzdENsaWNrID8gJ21mcEZhc3RDbGljaycgOiAnY2xpY2snOw0KCQkJCQlhcnJvd0xlZnRbZU5hbWVdKGZ1bmN0aW9uKCkgew0KCQkJCQkJbWZwLnByZXYoKTsNCgkJCQkJfSk7CQkJDQoJCQkJCWFycm93UmlnaHRbZU5hbWVdKGZ1bmN0aW9uKCkgew0KCQkJCQkJbWZwLm5leHQoKTsNCgkJCQkJfSk7CQ0KDQoJCQkJCS8vIFBvbHlmaWxsIGZvciA6YmVmb3JlIGFuZCA6YWZ0ZXIgKGFkZHMgZWxlbWVudHMgd2l0aCBjbGFzc2VzIG1mcC1hIGFuZCBtZnAtYikNCgkJCQkJaWYobWZwLmlzSUU3KSB7DQoJCQkJCQlfZ2V0RWwoJ2InLCBhcnJvd0xlZnRbMF0sIGZhbHNlLCB0cnVlKTsNCgkJCQkJCV9nZXRFbCgnYScsIGFycm93TGVmdFswXSwgZmFsc2UsIHRydWUpOw0KCQkJCQkJX2dldEVsKCdiJywgYXJyb3dSaWdodFswXSwgZmFsc2UsIHRydWUpOw0KCQkJCQkJX2dldEVsKCdhJywgYXJyb3dSaWdodFswXSwgZmFsc2UsIHRydWUpOw0KCQkJCQl9DQoNCgkJCQkJbWZwLmNvbnRhaW5lci5hcHBlbmQoYXJyb3dMZWZ0LmFkZChhcnJvd1JpZ2h0KSk7DQoJCQkJfQ0KCQkJfSk7DQoNCgkJCV9tZnBPbihDSEFOR0VfRVZFTlQrbnMsIGZ1bmN0aW9uKCkgew0KCQkJCWlmKG1mcC5fcHJlbG9hZFRpbWVvdXQpIGNsZWFyVGltZW91dChtZnAuX3ByZWxvYWRUaW1lb3V0KTsNCg0KCQkJCW1mcC5fcHJlbG9hZFRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgew0KCQkJCQltZnAucHJlbG9hZE5lYXJieUltYWdlcygpOw0KCQkJCQltZnAuX3ByZWxvYWRUaW1lb3V0ID0gbnVsbDsNCgkJCQl9LCAxNik7CQkNCgkJCX0pOw0KDQoNCgkJCV9tZnBPbihDTE9TRV9FVkVOVCtucywgZnVuY3Rpb24oKSB7DQoJCQkJX2RvY3VtZW50Lm9mZihucyk7DQoJCQkJbWZwLndyYXAub2ZmKCdjbGljaycrbnMpOw0KCQkJDQoJCQkJaWYobWZwLmFycm93TGVmdCAmJiBzdXBwb3J0c0Zhc3RDbGljaykgew0KCQkJCQltZnAuYXJyb3dMZWZ0LmFkZChtZnAuYXJyb3dSaWdodCkuZGVzdHJveU1mcEZhc3RDbGljaygpOw0KCQkJCX0NCgkJCQltZnAuYXJyb3dSaWdodCA9IG1mcC5hcnJvd0xlZnQgPSBudWxsOw0KCQkJfSk7DQoNCgkJfSwgDQoJCW5leHQ6IGZ1bmN0aW9uKCkgew0KCQkJbWZwLmRpcmVjdGlvbiA9IHRydWU7DQoJCQltZnAuaW5kZXggPSBfZ2V0TG9vcGVkSWQobWZwLmluZGV4ICsgMSk7DQoJCQltZnAudXBkYXRlSXRlbUhUTUwoKTsNCgkJfSwNCgkJcHJldjogZnVuY3Rpb24oKSB7DQoJCQltZnAuZGlyZWN0aW9uID0gZmFsc2U7DQoJCQltZnAuaW5kZXggPSBfZ2V0TG9vcGVkSWQobWZwLmluZGV4IC0gMSk7DQoJCQltZnAudXBkYXRlSXRlbUhUTUwoKTsNCgkJfSwNCgkJZ29UbzogZnVuY3Rpb24obmV3SW5kZXgpIHsNCgkJCW1mcC5kaXJlY3Rpb24gPSAobmV3SW5kZXggPj0gbWZwLmluZGV4KTsNCgkJCW1mcC5pbmRleCA9IG5ld0luZGV4Ow0KCQkJbWZwLnVwZGF0ZUl0ZW1IVE1MKCk7DQoJCX0sDQoJCXByZWxvYWROZWFyYnlJbWFnZXM6IGZ1bmN0aW9uKCkgew0KCQkJdmFyIHAgPSBtZnAuc3QuZ2FsbGVyeS5wcmVsb2FkLA0KCQkJCXByZWxvYWRCZWZvcmUgPSBNYXRoLm1pbihwWzBdLCBtZnAuaXRlbXMubGVuZ3RoKSwNCgkJCQlwcmVsb2FkQWZ0ZXIgPSBNYXRoLm1pbihwWzFdLCBtZnAuaXRlbXMubGVuZ3RoKSwNCgkJCQlpOw0KDQoJCQlmb3IoaSA9IDE7IGkgPD0gKG1mcC5kaXJlY3Rpb24gPyBwcmVsb2FkQWZ0ZXIgOiBwcmVsb2FkQmVmb3JlKTsgaSsrKSB7DQoJCQkJbWZwLl9wcmVsb2FkSXRlbShtZnAuaW5kZXgraSk7DQoJCQl9DQoJCQlmb3IoaSA9IDE7IGkgPD0gKG1mcC5kaXJlY3Rpb24gPyBwcmVsb2FkQmVmb3JlIDogcHJlbG9hZEFmdGVyKTsgaSsrKSB7DQoJCQkJbWZwLl9wcmVsb2FkSXRlbShtZnAuaW5kZXgtaSk7DQoJCQl9DQoJCX0sDQoJCV9wcmVsb2FkSXRlbTogZnVuY3Rpb24oaW5kZXgpIHsNCgkJCWluZGV4ID0gX2dldExvb3BlZElkKGluZGV4KTsNCg0KCQkJaWYobWZwLml0ZW1zW2luZGV4XS5wcmVsb2FkZWQpIHsNCgkJCQlyZXR1cm47DQoJCQl9DQoNCgkJCXZhciBpdGVtID0gbWZwLml0ZW1zW2luZGV4XTsNCgkJCWlmKCFpdGVtLnBhcnNlZCkgew0KCQkJCWl0ZW0gPSBtZnAucGFyc2VFbCggaW5kZXggKTsNCgkJCX0NCg0KCQkJX21mcFRyaWdnZXIoJ0xhenlMb2FkJywgaXRlbSk7DQoNCgkJCWlmKGl0ZW0udHlwZSA9PT0gJ2ltYWdlJykgew0KCQkJCWl0ZW0uaW1nID0gJCgnPGltZyBjbGFzcz0ibWZwLWltZyIgLz4nKS5vbignbG9hZC5tZnBsb2FkZXInLCBmdW5jdGlvbigpIHsNCgkJCQkJaXRlbS5oYXNTaXplID0gdHJ1ZTsNCgkJCQl9KS5vbignZXJyb3IubWZwbG9hZGVyJywgZnVuY3Rpb24oKSB7DQoJCQkJCWl0ZW0uaGFzU2l6ZSA9IHRydWU7DQoJCQkJCWl0ZW0ubG9hZEVycm9yID0gdHJ1ZTsNCgkJCQkJX21mcFRyaWdnZXIoJ0xhenlMb2FkRXJyb3InLCBpdGVtKTsNCgkJCQl9KS5hdHRyKCdzcmMnLCBpdGVtLnNyYyk7DQoJCQl9DQoNCg0KCQkJaXRlbS5wcmVsb2FkZWQgPSB0cnVlOw0KCQl9DQoJfQ0KfSk7DQoNCi8qDQpUb3VjaCBTdXBwb3J0IHRoYXQgbWlnaHQgYmUgaW1wbGVtZW50ZWQgc29tZSBkYXkNCg0KYWRkU3dpcGVHZXN0dXJlOiBmdW5jdGlvbigpIHsNCgl2YXIgc3RhcnRYLA0KCQltb3ZlZCwNCgkJbXVsdGlwbGVUb3VjaGVzOw0KDQoJCXJldHVybjsNCg0KCXZhciBuYW1lc3BhY2UgPSAnLm1mcCcsDQoJCWFkZEV2ZW50TmFtZXMgPSBmdW5jdGlvbihwcmVmLCBkb3duLCBtb3ZlLCB1cCwgY2FuY2VsKSB7DQoJCQltZnAuX3RTdGFydCA9IHByZWYgKyBkb3duICsgbmFtZXNwYWNlOw0KCQkJbWZwLl90TW92ZSA9IHByZWYgKyBtb3ZlICsgbmFtZXNwYWNlOw0KCQkJbWZwLl90RW5kID0gcHJlZiArIHVwICsgbmFtZXNwYWNlOw0KCQkJbWZwLl90Q2FuY2VsID0gcHJlZiArIGNhbmNlbCArIG5hbWVzcGFjZTsNCgkJfTsNCg0KCWlmKHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCkgew0KCQlhZGRFdmVudE5hbWVzKCdNU1BvaW50ZXInLCAnRG93bicsICdNb3ZlJywgJ1VwJywgJ0NhbmNlbCcpOw0KCX0gZWxzZSBpZignb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHsNCgkJYWRkRXZlbnROYW1lcygndG91Y2gnLCAnc3RhcnQnLCAnbW92ZScsICdlbmQnLCAnY2FuY2VsJyk7DQoJfSBlbHNlIHsNCgkJcmV0dXJuOw0KCX0NCglfd2luZG93Lm9uKG1mcC5fdFN0YXJ0LCBmdW5jdGlvbihlKSB7DQoJCXZhciBvRSA9IGUub3JpZ2luYWxFdmVudDsNCgkJbXVsdGlwbGVUb3VjaGVzID0gbW92ZWQgPSBmYWxzZTsNCgkJc3RhcnRYID0gb0UucGFnZVggfHwgb0UuY2hhbmdlZFRvdWNoZXNbMF0ucGFnZVg7DQoJfSkub24obWZwLl90TW92ZSwgZnVuY3Rpb24oZSkgew0KCQlpZihlLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGggPiAxKSB7DQoJCQltdWx0aXBsZVRvdWNoZXMgPSBlLm9yaWdpbmFsRXZlbnQudG91Y2hlcy5sZW5ndGg7DQoJCX0gZWxzZSB7DQoJCQkvL2UucHJldmVudERlZmF1bHQoKTsNCgkJCW1vdmVkID0gdHJ1ZTsNCgkJfQ0KCX0pLm9uKG1mcC5fdEVuZCArICcgJyArIG1mcC5fdENhbmNlbCwgZnVuY3Rpb24oZSkgew0KCQlpZihtb3ZlZCAmJiAhbXVsdGlwbGVUb3VjaGVzKSB7DQoJCQl2YXIgb0UgPSBlLm9yaWdpbmFsRXZlbnQsDQoJCQkJZGlmZiA9IHN0YXJ0WCAtIChvRS5wYWdlWCB8fCBvRS5jaGFuZ2VkVG91Y2hlc1swXS5wYWdlWCk7DQoNCgkJCWlmKGRpZmYgPiAyMCkgew0KCQkJCW1mcC5uZXh0KCk7DQoJCQl9IGVsc2UgaWYoZGlmZiA8IC0yMCkgew0KCQkJCW1mcC5wcmV2KCk7DQoJCQl9DQoJCX0NCgl9KTsNCn0sDQoqLw0KDQoNCi8qPj5nYWxsZXJ5Ki8NCg0KLyo+PnJldGluYSovDQoNCnZhciBSRVRJTkFfTlMgPSAncmV0aW5hJzsNCg0KJC5tYWduaWZpY1BvcHVwLnJlZ2lzdGVyTW9kdWxlKFJFVElOQV9OUywgew0KCW9wdGlvbnM6IHsNCgkJcmVwbGFjZVNyYzogZnVuY3Rpb24oaXRlbSkgew0KCQkJcmV0dXJuIGl0ZW0uc3JjLnJlcGxhY2UoL1wuXHcrJC8sIGZ1bmN0aW9uKG0pIHsgcmV0dXJuICdAMngnICsgbTsgfSk7DQoJCX0sDQoJCXJhdGlvOiAxIC8vIEZ1bmN0aW9uIG9yIG51bWJlci4gIFNldCB0byAxIHRvIGRpc2FibGUuDQoJfSwNCglwcm90bzogew0KCQlpbml0UmV0aW5hOiBmdW5jdGlvbigpIHsNCgkJCWlmKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvID4gMSkgew0KDQoJCQkJdmFyIHN0ID0gbWZwLnN0LnJldGluYSwNCgkJCQkJcmF0aW8gPSBzdC5yYXRpbzsNCg0KCQkJCXJhdGlvID0gIWlzTmFOKHJhdGlvKSA/IHJhdGlvIDogcmF0aW8oKTsNCg0KCQkJCWlmKHJhdGlvID4gMSkgew0KCQkJCQlfbWZwT24oJ0ltYWdlSGFzU2l6ZScgKyAnLicgKyBSRVRJTkFfTlMsIGZ1bmN0aW9uKGUsIGl0ZW0pIHsNCgkJCQkJCWl0ZW0uaW1nLmNzcyh7DQoJCQkJCQkJJ21heC13aWR0aCc6IGl0ZW0uaW1nWzBdLm5hdHVyYWxXaWR0aCAvIHJhdGlvLA0KCQkJCQkJCSd3aWR0aCc6ICcxMDAlJw0KCQkJCQkJfSk7DQoJCQkJCX0pOw0KCQkJCQlfbWZwT24oJ0VsZW1lbnRQYXJzZScgKyAnLicgKyBSRVRJTkFfTlMsIGZ1bmN0aW9uKGUsIGl0ZW0pIHsNCgkJCQkJCWl0ZW0uc3JjID0gc3QucmVwbGFjZVNyYyhpdGVtLCByYXRpbyk7DQoJCQkJCX0pOw0KCQkJCX0NCgkJCX0NCg0KCQl9DQoJfQ0KfSk7DQoNCi8qPj5yZXRpbmEqLw0KDQovKj4+ZmFzdGNsaWNrKi8NCi8qKg0KICogRmFzdENsaWNrIGV2ZW50IGltcGxlbWVudGF0aW9uLiAocmVtb3ZlcyAzMDBtcyBkZWxheSBvbiB0b3VjaCBkZXZpY2VzKQ0KICogQmFzZWQgb24gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vbW9iaWxlL2FydGljbGVzL2Zhc3RfYnV0dG9ucw0KICoNCiAqIFlvdSBtYXkgdXNlIGl0IG91dHNpZGUgdGhlIE1hZ25pZmljIFBvcHVwIGJ5IGNhbGxpbmcganVzdDoNCiAqDQogKiAkKCcueW91ci1lbCcpLm1mcEZhc3RDbGljayhmdW5jdGlvbigpIHsNCiAqICAgICBjb25zb2xlLmxvZygnQ2xpY2tlZCEnKTsNCiAqIH0pOw0KICoNCiAqIFRvIHVuYmluZDoNCiAqICQoJy55b3VyLWVsJykuZGVzdHJveU1mcEZhc3RDbGljaygpOw0KICogDQogKiANCiAqIE5vdGUgdGhhdCBpdCdzIGEgdmVyeSBiYXNpYyBhbmQgc2ltcGxlIGltcGxlbWVudGF0aW9uLCBpdCBibG9ja3MgZ2hvc3QgY2xpY2sgb24gdGhlIHNhbWUgZWxlbWVudCB3aGVyZSBpdCB3YXMgYm91bmQuDQogKiBJZiB5b3UgbmVlZCBzb21ldGhpbmcgbW9yZSBhZHZhbmNlZCwgdXNlIHBsdWdpbiBieSBGVCBMYWJzIGh0dHBzOi8vZ2l0aHViLmNvbS9mdGxhYnMvZmFzdGNsaWNrDQogKiANCiAqLw0KDQooZnVuY3Rpb24oKSB7DQoJdmFyIGdob3N0Q2xpY2tEZWxheSA9IDEwMDAsDQoJCXN1cHBvcnRzVG91Y2ggPSAnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3csDQoJCXVuYmluZFRvdWNoTW92ZSA9IGZ1bmN0aW9uKCkgew0KCQkJX3dpbmRvdy5vZmYoJ3RvdWNobW92ZScrbnMrJyB0b3VjaGVuZCcrbnMpOw0KCQl9LA0KCQllTmFtZSA9ICdtZnBGYXN0Q2xpY2snLA0KCQlucyA9ICcuJytlTmFtZTsNCg0KDQoJLy8gQXMgWmVwdG8uanMgZG9lc24ndCBoYXZlIGFuIGVhc3kgd2F5IHRvIGFkZCBjdXN0b20gZXZlbnRzIChsaWtlIGpRdWVyeSksIHNvIHdlIGltcGxlbWVudCBpdCBpbiB0aGlzIHdheQ0KCSQuZm4ubWZwRmFzdENsaWNrID0gZnVuY3Rpb24oY2FsbGJhY2spIHsNCg0KCQlyZXR1cm4gJCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCkgew0KDQoJCQl2YXIgZWxlbSA9ICQodGhpcyksDQoJCQkJbG9jazsNCg0KCQkJaWYoIHN1cHBvcnRzVG91Y2ggKSB7DQoNCgkJCQl2YXIgdGltZW91dCwNCgkJCQkJc3RhcnRYLA0KCQkJCQlzdGFydFksDQoJCQkJCXBvaW50ZXJNb3ZlZCwNCgkJCQkJcG9pbnQsDQoJCQkJCW51bVBvaW50ZXJzOw0KDQoJCQkJZWxlbS5vbigndG91Y2hzdGFydCcgKyBucywgZnVuY3Rpb24oZSkgew0KCQkJCQlwb2ludGVyTW92ZWQgPSBmYWxzZTsNCgkJCQkJbnVtUG9pbnRlcnMgPSAxOw0KDQoJCQkJCXBvaW50ID0gZS5vcmlnaW5hbEV2ZW50ID8gZS5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0gOiBlLnRvdWNoZXNbMF07DQoJCQkJCXN0YXJ0WCA9IHBvaW50LmNsaWVudFg7DQoJCQkJCXN0YXJ0WSA9IHBvaW50LmNsaWVudFk7DQoNCgkJCQkJX3dpbmRvdy5vbigndG91Y2htb3ZlJytucywgZnVuY3Rpb24oZSkgew0KCQkJCQkJcG9pbnQgPSBlLm9yaWdpbmFsRXZlbnQgPyBlLm9yaWdpbmFsRXZlbnQudG91Y2hlcyA6IGUudG91Y2hlczsNCgkJCQkJCW51bVBvaW50ZXJzID0gcG9pbnQubGVuZ3RoOw0KCQkJCQkJcG9pbnQgPSBwb2ludFswXTsNCgkJCQkJCWlmIChNYXRoLmFicyhwb2ludC5jbGllbnRYIC0gc3RhcnRYKSA+IDEwIHx8DQoJCQkJCQkJTWF0aC5hYnMocG9pbnQuY2xpZW50WSAtIHN0YXJ0WSkgPiAxMCkgew0KCQkJCQkJCXBvaW50ZXJNb3ZlZCA9IHRydWU7DQoJCQkJCQkJdW5iaW5kVG91Y2hNb3ZlKCk7DQoJCQkJCQl9DQoJCQkJCX0pLm9uKCd0b3VjaGVuZCcrbnMsIGZ1bmN0aW9uKGUpIHsNCgkJCQkJCXVuYmluZFRvdWNoTW92ZSgpOw0KCQkJCQkJaWYocG9pbnRlck1vdmVkIHx8IG51bVBvaW50ZXJzID4gMSkgew0KCQkJCQkJCXJldHVybjsNCgkJCQkJCX0NCgkJCQkJCWxvY2sgPSB0cnVlOw0KCQkJCQkJZS5wcmV2ZW50RGVmYXVsdCgpOw0KCQkJCQkJY2xlYXJUaW1lb3V0KHRpbWVvdXQpOw0KCQkJCQkJdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQoJCQkJCQkJbG9jayA9IGZhbHNlOw0KCQkJCQkJfSwgZ2hvc3RDbGlja0RlbGF5KTsNCgkJCQkJCWNhbGxiYWNrKCk7DQoJCQkJCX0pOw0KCQkJCX0pOw0KDQoJCQl9DQoNCgkJCWVsZW0ub24oJ2NsaWNrJyArIG5zLCBmdW5jdGlvbigpIHsNCgkJCQlpZighbG9jaykgew0KCQkJCQljYWxsYmFjaygpOw0KCQkJCX0NCgkJCX0pOw0KCQl9KTsNCgl9Ow0KDQoJJC5mbi5kZXN0cm95TWZwRmFzdENsaWNrID0gZnVuY3Rpb24oKSB7DQoJCSQodGhpcykub2ZmKCd0b3VjaHN0YXJ0JyArIG5zICsgJyBjbGljaycgKyBucyk7DQoJCWlmKHN1cHBvcnRzVG91Y2gpIF93aW5kb3cub2ZmKCd0b3VjaG1vdmUnK25zKycgdG91Y2hlbmQnK25zKTsNCgl9Ow0KfSkoKTsNCg0KLyo+PmZhc3RjbGljayovDQogX2NoZWNrSW5zdGFuY2UoKTsgfSkod2luZG93LmpRdWVyeSB8fCB3aW5kb3cuWmVwdG8pOw==</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="22202500" offset="0" length="3875" />
        <PacketInfo time="22202500" offset="3875" length="4096" />
        <PacketInfo time="22202515" offset="7971" length="4096" />
        <PacketInfo time="22202515" offset="12067" length="2200" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>